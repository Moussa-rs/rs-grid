(function(W,C){typeof exports=="object"&&typeof module<"u"?C(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],C):(W=typeof globalThis<"u"?globalThis:W||self,C(W.RsGrid={},W.Vue))})(this,function(W,C){"use strict";var eo=Object.defineProperty;var io=(W,C,at)=>C in W?eo(W,C,{enumerable:!0,configurable:!0,writable:!0,value:at}):W[C]=at;var f=(W,C,at)=>(io(W,typeof C!="symbol"?C+"":C,at),at);function at(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map(function(s){s(i)}),(n=t.get("*"))&&n.slice().map(function(s){s(e,i)})}}}const Ht={},Mt=at();Ht.$emit=(...t)=>{Mt.emit(t[0],t.slice(1))},Ht.$on=function(){Reflect.apply(Mt.on,Mt,arguments)},Ht.$off=function(){Reflect.apply(Mt.off,Mt,arguments)};var At={},Ki={get exports(){return At},set exports(t){At=t}},Ji=Ki.exports={};Ji.forEach=function(t,e){for(var i=0;i<t.length;i++){var n=e(t[i]);if(n)return n}};var Zi=function(t){var e=t.stateHandler.getState;function i(o){var a=e(o);return a&&!!a.isDetectable}function n(o){e(o).isDetectable=!0}function s(o){return!!e(o).busy}function r(o,a){e(o).busy=!!a}return{isDetectable:i,markAsDetectable:n,isBusy:s,markBusy:r}},Qi=function(t){var e={};function i(o){var a=t.get(o);return a===void 0?[]:e[a]||[]}function n(o,a){var c=t.get(o);e[c]||(e[c]=[]),e[c].push(a)}function s(o,a){for(var c=i(o),l=0,u=c.length;l<u;++l)if(c[l]===a){c.splice(l,1);break}}function r(o){var a=i(o);a&&(a.length=0)}return{get:i,add:n,removeListener:s,removeAllListeners:r}},tn=function(){var t=1;function e(){return t++}return{generate:e}},en=function(t){var e=t.idGenerator,i=t.stateHandler.getState;function n(r){var o=i(r);return o&&o.id!==void 0?o.id:null}function s(r){var o=i(r);if(!o)throw new Error("setId required the element to have a resize detection state.");var a=e.generate();return o.id=a,a}return{get:n,set:s}},nn=function(t){function e(){}var i={log:e,warn:e,error:e};if(!t&&window.console){var n=function(s,r){s[r]=function(){var a=console[r];if(a.apply)a.apply(console,arguments);else for(var c=0;c<arguments.length;c++)a(arguments[c])}};n(i,"log"),n(i,"warn"),n(i,"error")}return i},Bt={},sn={get exports(){return Bt},set exports(t){Bt=t}},Re=sn.exports={};Re.isIE=function(t){function e(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!==-1||n.indexOf("trident")!==-1||n.indexOf(" edge/")!==-1}if(!e())return!1;if(!t)return!0;var i=function(){var n,s=3,r=document.createElement("div"),o=r.getElementsByTagName("i");do r.innerHTML="<!--[if gt IE "+ ++s+"]><i></i><![endif]-->";while(o[0]);return s>4?s:n}();return t===i},Re.isLegacyOpera=function(){return!!window.opera};var ie={},rn={get exports(){return ie},set exports(t){ie=t}},on=rn.exports={};on.getOption=an;function an(t,e,i){var n=t[e];return n==null&&i!==void 0?i:n}var _e=ie,ln=function(e){e=e||{};var i=e.reporter,n=_e.getOption(e,"async",!0),s=_e.getOption(e,"auto",!0);s&&!n&&(i&&i.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var r=Pe(),o,a=!1;function c(b,z){!a&&s&&n&&r.size()===0&&d(),r.add(b,z)}function l(){for(a=!0;r.size();){var b=r;r=Pe(),b.process()}a=!1}function u(b){a||(b===void 0&&(b=n),o&&(g(o),o=null),b?d():l())}function d(){o=y(l)}function g(b){var z=clearTimeout;return z(b)}function y(b){var z=function(T){return setTimeout(T,0)};return z(b)}return{add:c,force:u}};function Pe(){var t={},e=0,i=0,n=0;function s(a,c){c||(c=a,a=0),a>i?i=a:a<n&&(n=a),t[a]||(t[a]=[]),t[a].push(c),e++}function r(){for(var a=n;a<=i;a++)for(var c=t[a],l=0;l<c.length;l++){var u=c[l];u()}}function o(){return e}return{add:s,process:r,size:o}}var ne="_erd";function cn(t){return t[ne]={},ke(t)}function ke(t){return t[ne]}function un(t){delete t[ne]}var hn={initState:cn,getState:ke,cleanState:un},Dt=Bt,dn=function(t){t=t||{};var e=t.reporter,i=t.batchProcessor,n=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function s(l,u){function d(){u(l)}if(Dt.isIE(8))n(l).object={proxy:d},l.attachEvent("onresize",d);else{var g=a(l);if(!g)throw new Error("Element is not detectable by this strategy.");g.contentDocument.defaultView.addEventListener("resize",d)}}function r(l){var u=t.important?" !important; ":"; ";return(l.join(u)+u).trim()}function o(l,u,d){d||(d=u,u=l,l=null),l=l||{},l.debug;function g(y,b){var z=r(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),T=!1,P=window.getComputedStyle(y),E=y.offsetWidth,I=y.offsetHeight;n(y).startSize={width:E,height:I};function m(){function h(){if(P.position==="static"){y.style.setProperty("position","relative",l.important?"important":"");var O=function(A,_,L,D){function $(N){return N.replace(/[^-\d\.]/g,"")}var q=L[D];q!=="auto"&&$(q)!=="0"&&(A.warn("An element that is positioned static has style."+D+"="+q+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+D+" will be set to 0. Element: ",_),_.style.setProperty(D,"0",l.important?"important":""))};O(e,y,P,"top"),O(e,y,P,"right"),O(e,y,P,"bottom"),O(e,y,P,"left")}}function M(){T||h();function O(_,L){if(!_.contentDocument){var D=n(_);D.checkForObjectDocumentTimeoutId&&window.clearTimeout(D.checkForObjectDocumentTimeoutId),D.checkForObjectDocumentTimeoutId=setTimeout(function(){D.checkForObjectDocumentTimeoutId=0,O(_,L)},100);return}L(_.contentDocument)}var A=this;O(A,function(L){b(y)})}P.position!==""&&(h(),T=!0);var v=document.createElement("object");v.style.cssText=z,v.tabIndex=-1,v.type="text/html",v.setAttribute("aria-hidden","true"),v.onload=M,Dt.isIE()||(v.data="about:blank"),n(y)&&(y.appendChild(v),n(y).object=v,Dt.isIE()&&(v.data="about:blank"))}i?i.add(m):m()}Dt.isIE(8)?d(u):g(u,d)}function a(l){return n(l).object}function c(l){if(n(l)){var u=a(l);u&&(Dt.isIE(8)?l.detachEvent("onresize",u.proxy):l.removeChild(u),n(l).checkForObjectDocumentTimeoutId&&window.clearTimeout(n(l).checkForObjectDocumentTimeoutId),delete n(l).object)}}return{makeDetectable:o,addListener:s,uninstall:c}},fn=At.forEach,pn=function(t){t=t||{};var e=t.reporter,i=t.batchProcessor,n=t.stateHandler.getState;t.stateHandler.hasState;var s=t.idHandler;if(!i)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var r=u(),o="erd_scroll_detection_scrollbar_style",a="erd_scroll_detection_container";function c(m){d(m,o,a)}c(window.document);function l(m){var h=t.important?" !important; ":"; ";return(m.join(h)+h).trim()}function u(){var m=500,h=500,M=document.createElement("div");M.style.cssText=l(["position: absolute","width: "+m*2+"px","height: "+h*2+"px","visibility: hidden","margin: 0","padding: 0"]);var v=document.createElement("div");v.style.cssText=l(["position: absolute","width: "+m+"px","height: "+h+"px","overflow: scroll","visibility: none","top: "+-m*3+"px","left: "+-h*3+"px","visibility: hidden","margin: 0","padding: 0"]),v.appendChild(M),document.body.insertBefore(v,document.body.firstChild);var O=m-v.clientWidth,A=h-v.clientHeight;return document.body.removeChild(v),{width:O,height:A}}function d(m,h,M){function v(L,D){D=D||function(q){m.head.appendChild(q)};var $=m.createElement("style");return $.innerHTML=L,$.id=h,D($),$}if(!m.getElementById(h)){var O=M+"_animation",A=M+"_animation_active",_=`/* Created by the element-resize-detector library. */
`;_+="."+M+" > div::-webkit-scrollbar { "+l(["display: none"])+` }

`,_+="."+A+" { "+l(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+O,"animation-name: "+O])+` }
`,_+="@-webkit-keyframes "+O+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,_+="@keyframes "+O+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",v(_)}}function g(m){m.className+=" "+a+"_animation_active"}function y(m,h,M){if(m.addEventListener)m.addEventListener(h,M);else if(m.attachEvent)m.attachEvent("on"+h,M);else return e.error("[scroll] Don't know how to add event listeners.")}function b(m,h,M){if(m.removeEventListener)m.removeEventListener(h,M);else if(m.detachEvent)m.detachEvent("on"+h,M);else return e.error("[scroll] Don't know how to remove event listeners.")}function z(m){return n(m).container.childNodes[0].childNodes[0].childNodes[0]}function T(m){return n(m).container.childNodes[0].childNodes[0].childNodes[1]}function P(m,h){var M=n(m).listeners;if(!M.push)throw new Error("Cannot add listener to an element that is not detectable.");n(m).listeners.push(h)}function E(m,h,M){M||(M=h,h=m,m=null),m=m||{};function v(){if(m.debug){var x=Array.prototype.slice.call(arguments);if(x.unshift(s.get(h),"Scroll: "),e.log.apply)e.log.apply(null,x);else for(var R=0;R<x.length;R++)e.log(x[R])}}function O(x){function R(H){var V=H.getRootNode&&H.getRootNode().contains(H);return H===H.ownerDocument.body||H.ownerDocument.body.contains(H)||V}return!R(x)||window.getComputedStyle(x)===null}function A(x){var R=n(x).container.childNodes[0],H=window.getComputedStyle(R);return!H.width||H.width.indexOf("px")===-1}function _(){var x=window.getComputedStyle(h),R={};return R.position=x.position,R.width=h.offsetWidth,R.height=h.offsetHeight,R.top=x.top,R.right=x.right,R.bottom=x.bottom,R.left=x.left,R.widthCSS=x.width,R.heightCSS=x.height,R}function L(){var x=_();n(h).startSize={width:x.width,height:x.height},v("Element start size",n(h).startSize)}function D(){n(h).listeners=[]}function $(){if(v("storeStyle invoked."),!n(h)){v("Aborting because element has been uninstalled");return}var x=_();n(h).style=x}function q(x,R,H){n(x).lastWidth=R,n(x).lastHeight=H}function N(x){return z(x).childNodes[0]}function ft(){return 2*r.width+1}function Jt(){return 2*r.height+1}function Zt(x){return x+10+ft()}function Qt(x){return x+10+Jt()}function qr(x){return x*2+ft()}function Gr(x){return x*2+Jt()}function Fi(x,R,H){var V=z(x),pt=T(x),Et=Zt(R),zt=Qt(H),F=qr(R),k=Gr(H);V.scrollLeft=Et,V.scrollTop=zt,pt.scrollLeft=F,pt.scrollTop=k}function Xi(){var x=n(h).container;if(!x){x=document.createElement("div"),x.className=a,x.style.cssText=l(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),n(h).container=x,g(x),h.appendChild(x);var R=function(){n(h).onRendered&&n(h).onRendered()};y(x,"animationstart",R),n(h).onAnimationStart=R}return x}function Ur(){function x(){var B=n(h).style;if(B.position==="static"){h.style.setProperty("position","relative",m.important?"important":"");var et=function(Tt,mt,Zr,ee){function Qr(to){return to.replace(/[^-\d\.]/g,"")}var Ce=Zr[ee];Ce!=="auto"&&Qr(Ce)!=="0"&&(Tt.warn("An element that is positioned static has style."+ee+"="+Ce+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ee+" will be set to 0. Element: ",mt),mt.style[ee]=0)};et(e,h,B,"top"),et(e,h,B,"right"),et(e,h,B,"bottom"),et(e,h,B,"left")}}function R(B,et,Tt,mt){return B=B?B+"px":"0",et=et?et+"px":"0",Tt=Tt?Tt+"px":"0",mt=mt?mt+"px":"0",["left: "+B,"top: "+et,"right: "+mt,"bottom: "+Tt]}if(v("Injecting elements"),!n(h)){v("Aborting because element has been uninstalled");return}x();var H=n(h).container;H||(H=Xi());var V=r.width,pt=r.height,Et=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),zt=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(R(-(1+V),-(1+pt),-pt,-V))),F=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),k=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),G=l(["position: absolute","left: 0","top: 0"]),gt=l(["position: absolute","width: 200%","height: 200%"]),Q=document.createElement("div"),tt=document.createElement("div"),It=document.createElement("div"),qi=document.createElement("div"),te=document.createElement("div"),Gi=document.createElement("div");Q.dir="ltr",Q.style.cssText=Et,Q.className=a,tt.className=a,tt.style.cssText=zt,It.style.cssText=F,qi.style.cssText=G,te.style.cssText=k,Gi.style.cssText=gt,It.appendChild(qi),te.appendChild(Gi),tt.appendChild(It),tt.appendChild(te),Q.appendChild(tt),H.appendChild(Q);function Ui(){var B=n(h);B&&B.onExpand?B.onExpand():v("Aborting expand scroll handler: element has been uninstalled")}function Vi(){var B=n(h);B&&B.onShrink?B.onShrink():v("Aborting shrink scroll handler: element has been uninstalled")}y(It,"scroll",Ui),y(te,"scroll",Vi),n(h).onExpandScroll=Ui,n(h).onShrinkScroll=Vi}function Vr(){function x(F,k,G){var gt=N(F),Q=Zt(k),tt=Qt(G);gt.style.setProperty("width",Q+"px",m.important?"important":""),gt.style.setProperty("height",tt+"px",m.important?"important":"")}function R(F){var k=h.offsetWidth,G=h.offsetHeight,gt=k!==n(h).lastWidth||G!==n(h).lastHeight;v("Storing current size",k,G),q(h,k,G),i.add(0,function(){if(gt){if(!n(h)){v("Aborting because element has been uninstalled");return}if(!H()){v("Aborting because element container has not been initialized");return}if(m.debug){var tt=h.offsetWidth,It=h.offsetHeight;(tt!==k||It!==G)&&e.warn(s.get(h),"Scroll: Size changed before updating detector elements.")}x(h,k,G)}}),i.add(1,function(){if(!n(h)){v("Aborting because element has been uninstalled");return}if(!H()){v("Aborting because element container has not been initialized");return}Fi(h,k,G)}),gt&&F&&i.add(2,function(){if(!n(h)){v("Aborting because element has been uninstalled");return}if(!H()){v("Aborting because element container has not been initialized");return}F()})}function H(){return!!n(h).container}function V(){function F(){return n(h).lastNotifiedWidth===void 0}v("notifyListenersIfNeeded invoked");var k=n(h);if(F()&&k.lastWidth===k.startSize.width&&k.lastHeight===k.startSize.height)return v("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(k.lastWidth===k.lastNotifiedWidth&&k.lastHeight===k.lastNotifiedHeight)return v("Not notifying: Size already notified");v("Current size not notified, notifying..."),k.lastNotifiedWidth=k.lastWidth,k.lastNotifiedHeight=k.lastHeight,fn(n(h).listeners,function(G){G(h)})}function pt(){if(v("startanimation triggered."),A(h)){v("Ignoring since element is still unrendered...");return}v("Element rendered.");var F=z(h),k=T(h);(F.scrollLeft===0||F.scrollTop===0||k.scrollLeft===0||k.scrollTop===0)&&(v("Scrollbars out of sync. Updating detector elements..."),R(V))}function Et(){if(v("Scroll detected."),A(h)){v("Scroll event fired while unrendered. Ignoring...");return}R(V)}if(v("registerListenersAndPositionElements invoked."),!n(h)){v("Aborting because element has been uninstalled");return}n(h).onRendered=pt,n(h).onExpand=Et,n(h).onShrink=Et;var zt=n(h).style;x(h,zt.width,zt.height)}function Kr(){if(v("finalizeDomMutation invoked."),!n(h)){v("Aborting because element has been uninstalled");return}var x=n(h).style;q(h,x.width,x.height),Fi(h,x.width,x.height)}function Jr(){M(h)}function Yi(){v("Installing..."),D(),L(),i.add(0,$),i.add(1,Ur),i.add(2,Vr),i.add(3,Kr),i.add(4,Jr)}v("Making detectable..."),O(h)?(v("Element is detached"),Xi(),v("Waiting until element is attached..."),n(h).onRendered=function(){v("Element is now attached"),Yi()}):Yi()}function I(m){var h=n(m);h&&(h.onExpandScroll&&b(z(m),"scroll",h.onExpandScroll),h.onShrinkScroll&&b(T(m),"scroll",h.onShrinkScroll),h.onAnimationStart&&b(h.container,"animationstart",h.onAnimationStart),h.container&&m.removeChild(h.container))}return{makeDetectable:E,addListener:P,uninstall:I,initDocument:c}},Ct=At.forEach,gn=Zi,mn=Qi,yn=tn,bn=en,vn=nn,$e=Bt,xn=ln,it=hn,wn=dn,Sn=pn;function Oe(t){return Array.isArray(t)||t.length!==void 0}function He(t){if(Array.isArray(t))return t;var e=[];return Ct(t,function(i){e.push(i)}),e}function Ae(t){return t&&t.nodeType===1}var En=function(t){t=t||{};var e;if(t.idHandler)e={get:function(E){return t.idHandler.get(E,!0)},set:t.idHandler.set};else{var i=yn(),n=bn({idGenerator:i,stateHandler:it});e=n}var s=t.reporter;if(!s){var r=s===!1;s=vn(r)}var o=nt(t,"batchProcessor",xn({reporter:s})),a={};a.callOnAdd=!!nt(t,"callOnAdd",!0),a.debug=!!nt(t,"debug",!1);var c=mn(e),l=gn({stateHandler:it}),u,d=nt(t,"strategy","object"),g=nt(t,"important",!1),y={reporter:s,batchProcessor:o,stateHandler:it,idHandler:e,important:g};if(d==="scroll"&&($e.isLegacyOpera()?(s.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),d="object"):$e.isIE(9)&&(s.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),d="object")),d==="scroll")u=Sn(y);else if(d==="object")u=wn(y);else throw new Error("Invalid strategy name: "+d);var b={};function z(E,I,m){function h(L){var D=c.get(L);Ct(D,function(q){q(L)})}function M(L,D,$){c.add(D,$),L&&$(D)}if(m||(m=I,I=E,E={}),!I)throw new Error("At least one element required.");if(!m)throw new Error("Listener required.");if(Ae(I))I=[I];else if(Oe(I))I=He(I);else return s.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var v=0,O=nt(E,"callOnAdd",a.callOnAdd),A=nt(E,"onReady",function(){}),_=nt(E,"debug",a.debug);Ct(I,function(D){it.getState(D)||(it.initState(D),e.set(D));var $=e.get(D);if(_&&s.log("Attaching listener to element",$,D),!l.isDetectable(D)){if(_&&s.log($,"Not detectable."),l.isBusy(D)){_&&s.log($,"System busy making it detectable"),M(O,D,m),b[$]=b[$]||[],b[$].push(function(){v++,v===I.length&&A()});return}return _&&s.log($,"Making detectable..."),l.markBusy(D,!0),u.makeDetectable({debug:_,important:g},D,function(N){if(_&&s.log($,"onElementDetectable"),it.getState(N)){l.markAsDetectable(N),l.markBusy(N,!1),u.addListener(N,h),M(O,N,m);var ft=it.getState(N);if(ft&&ft.startSize){var Jt=N.offsetWidth,Zt=N.offsetHeight;(ft.startSize.width!==Jt||ft.startSize.height!==Zt)&&h(N)}b[$]&&Ct(b[$],function(Qt){Qt()})}else _&&s.log($,"Element uninstalled before being detectable.");delete b[$],v++,v===I.length&&A()})}_&&s.log($,"Already detecable, adding listener."),M(O,D,m),v++}),v===I.length&&A()}function T(E){if(!E)return s.error("At least one element is required.");if(Ae(E))E=[E];else if(Oe(E))E=He(E);else return s.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");Ct(E,function(I){c.removeAllListeners(I),u.uninstall(I),it.cleanState(I)})}function P(E){u.initDocument&&u.initDocument(E)}return{listenTo:z,removeListener:c.removeListener,removeAllListeners:c.removeAllListeners,uninstall:T,initDocument:P}};function nt(t,e,i){var n=t[e];return n==null&&i!==void 0?i:n}function zn(t){let e=0,i;for(let n=0,s=t.length;n<s;n++)i=t[n].y+t[n].h,i>e&&(e=i);return e}function se(t){const e=Array(t.length);for(let i=0,n=t.length;i<n;i++)e[i]=In(t[i]);return e}function In(t){return JSON.parse(JSON.stringify(t))}function Be(t,e){return!(t===e||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function yt(t,e,i){const n=je(t),s=Fe(t),r=Array(t.length);for(let o=0,a=s.length;o<a;o++){let c=s[o];c.static||(c=Tn(n,c,e,i),n.push(c)),r[t.indexOf(c)]=c,c.moved=!1}return r}function Tn(t,e,i,n){if(i)for(;e.y>0&&!Rt(t,e);)e.y--;else if(n){const r=n[e.id].y;for(;e.y>r&&!Rt(t,e);)e.y--}let s;for(;s=Rt(t,e);)e.y=s.y+s.h;return e}function Mn(t,e){const i=je(t);for(let n=0,s=t.length;n<s;n++){const r=t[n];if(r.x+r.w>e.cols&&(r.x=e.cols-r.w),r.x<0&&(r.x=0,r.w=e.cols),!r.static)i.push(r);else for(;Rt(i,r);)r.y++}return t}function Le(t,e){for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return t[i]}function Rt(t,e){for(let i=0,n=t.length;i<n;i++)if(Be(t[i],e))return t[i]}function We(t,e){return t.filter(i=>Be(i,e))}function je(t){return t.filter(e=>e.static)}function re(t,e,i,n,s,r){if(e.static)return t;const o=e.x,a=e.y,c=n&&e.y>n;typeof i=="number"&&(e.x=i),typeof n=="number"&&(e.y=n),e.moved=!0;let l=Fe(t);c&&(l=l.reverse());const u=We(l,e);if(r&&u.length)return e.x=o,e.y=a,e.moved=!1,t;for(let d=0,g=u.length;d<g;d++){const y=u[d];y.moved||e.y>y.y&&e.y-y.y>y.h/4||(y.static?t=Ne(t,y,e,s):t=Ne(t,e,y,s))}return t}function Ne(t,e,i,n){if(n){const r={x:i.x,y:i.y,w:i.w,h:i.h,i:"-1"};if(r.y=Math.max(e.y-i.h,0),!Rt(t,r))return re(t,i,void 0,r.y,!1)}return re(t,i,void 0,i.y+1,!1)}function Dn(t,e,i,n){const s="translate3d("+e+"px,"+t+"px, 0)";return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:i+"px",height:n+"px",position:"absolute"}}function Cn(t,e,i,n){const s="translate3d("+e*-1+"px,"+t+"px, 0)";return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:i+"px",height:n+"px",position:"absolute"}}function Rn(t,e,i,n){return{top:t+"px",left:e+"px",width:i+"px",height:n+"px",position:"absolute"}}function _n(t,e,i,n){return{top:t+"px",right:e+"px",width:i+"px",height:n+"px",position:"absolute"}}function Fe(t){return[].concat(t).sort(function(e,i){return e.y===i.y&&e.x===i.x?0:e.y>i.y||e.y===i.y&&e.x>i.x?1:-1})}function Pn(t,e){e=e||"Layout";const i=["x","y","w","h"],n=[];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let s=0,r=t.length;s<r;s++){const o=t[s];for(let a=0;a<i.length;a++)if(typeof o[i[a]]!="number")throw new Error("GridLayout: "+e+"["+s+"]."+i[a]+" must be a number!");if(o.id===void 0||o.id===null)throw new Error("GridLayout: "+e+"["+s+"].id cannot be null!");if(typeof o.id!="number"&&typeof o.id!="string")throw new Error("GridLayout: "+e+"["+s+"].id must be a string or number!");if(n.indexOf(o.id)>=0)throw new Error("GridLayout: "+e+"["+s+"].id must be unique!");if(n.push(o.id),o.static!==void 0&&typeof o.static!="boolean")throw new Error("GridLayout: "+e+"["+s+"].static must be a boolean!")}}function kn(t,e){const i=Xe(t);let n=i[0];for(let s=1,r=i.length;s<r;s++){const o=i[s];e>t[o]&&(n=o)}return n}function oe(t,e){if(!e[t])throw new Error("ResponsiveGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function $n(t,e,i,n,s,r,o){if(e[n])return se(e[n]);let a=t;const c=Xe(i),l=c.slice(c.indexOf(n));for(let u=0,d=l.length;u<d;u++){const g=l[u];if(e[g]){a=e[g];break}}return a=se(a||[]),yt(Mn(a,{cols:r}),o)}function Xe(t){return Object.keys(t).sort(function(i,n){return t[i]-t[n]})}function Ye(t){return On(t)}function On(t){const e=t.target.offsetParent||document.body,i=t.offsetParent===document.body?{left:0,top:0}:e.getBoundingClientRect(),n=t.clientX+e.scrollLeft-i.left,s=t.clientY+e.scrollTop-i.top;return{x:n,y:s}}function qe(t,e,i,n){return Hn(t)?{deltaX:i-t,deltaY:n-e,lastX:t,lastY:e,x:i,y:n}:{deltaX:0,deltaY:0,lastX:i,lastY:n,x:i,y:n}}function Hn(t){return typeof t=="number"&&!isNaN(t)}let An="auto";function Bn(){return typeof document<"u"}function Ge(){return typeof window<"u"}function Ue(){return Bn()?typeof document.dir<"u"?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir"):An}function Ln(t,e){if(!Ge){e();return}window.addEventListener(t,e)}function Wn(t,e){Ge&&window.removeEventListener(t,e)}const X={init:jn,document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function bt(){}const j=X;function jn(t){const e=t;X.document=e.document,X.DocumentFragment=e.DocumentFragment||bt,X.SVGElement=e.SVGElement||bt,X.SVGSVGElement=e.SVGSVGElement||bt,X.SVGElementInstance=e.SVGElementInstance||bt,X.Element=e.Element||bt,X.HTMLElement=e.HTMLElement||X.Element,X.Event=e.Event,X.Touch=e.Touch||bt,X.PointerEvent=e.PointerEvent||e.MSPointerEvent}const Ve=t=>!!(t&&t.Window)&&t instanceof t.Window;let Ke,st;function Je(t){Ke=t;const e=t.document.createTextNode("");e.ownerDocument!==t.document&&typeof t.wrap=="function"&&t.wrap(e)===e&&(t=t.wrap(t)),st=t}typeof window<"u"&&window&&Je(window);function lt(t){return Ve(t)?t:(t.ownerDocument||t).defaultView||st.window}const Nn=t=>t===st||Ve(t),Fn=t=>Lt(t)&&t.nodeType===11,Lt=t=>!!t&&typeof t=="object",Ze=t=>typeof t=="function",p={window:Nn,docFrag:Fn,object:Lt,func:Ze,number:t=>typeof t=="number",bool:t=>typeof t=="boolean",string:t=>typeof t=="string",element:t=>{if(!t||typeof t!="object")return!1;const e=lt(t)||st;return/object|function/.test(typeof Element)?t instanceof Element||t instanceof e.Element:t.nodeType===1&&typeof t.nodeName=="string"},plainObject:t=>Lt(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString()),array:t=>Lt(t)&&typeof t.length<"u"&&Ze(t.splice)},Y={init:Xn,supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};function Xn(t){const e=j.Element,i=t.navigator||{};Y.supportsTouch="ontouchstart"in t||p.func(t.DocumentTouch)&&j.document instanceof t.DocumentTouch,Y.supportsPointerEvent=i.pointerEnabled!==!1&&!!j.PointerEvent,Y.isIOS=/iP(hone|od|ad)/.test(i.platform),Y.isIOS7=/iP(hone|od|ad)/.test(i.platform)&&/OS 7[^\d]/.test(i.appVersion),Y.isIe9=/MSIE 9/.test(i.userAgent),Y.isOperaMobile=i.appName==="Opera"&&Y.supportsTouch&&/Presto/.test(i.userAgent),Y.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",Y.pEventTypes=Y.supportsPointerEvent?j.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,Y.wheelEvent=j.document&&"onmousewheel"in j.document?"mousewheel":"wheel"}const U=Y,Yn=(t,e)=>t.indexOf(e)!==-1,Qe=(t,e)=>{for(const i of e)t.push(i);return t},ti=t=>Qe([],t),Wt=(t,e)=>{for(let i=0;i<t.length;i++)if(e(t[i],i,t))return i;return-1},ae=(t,e)=>t[Wt(t,e)];function vt(t){const e={};for(const i in t){const n=t[i];p.plainObject(n)?e[i]=vt(n):p.array(n)?e[i]=ti(n):e[i]=n}return e}function w(t,e){for(const n in e)t[n]=e[n];return t}let ei=0,K,ct;function qn(t){if(K=t.requestAnimationFrame,ct=t.cancelAnimationFrame,!K){const e=["ms","moz","webkit","o"];for(const i of e)K=t[`${i}RequestAnimationFrame`],ct=t[`${i}CancelAnimationFrame`]||t[`${i}CancelRequestAnimationFrame`]}K=K&&K.bind(t),ct=ct&&ct.bind(t),K||(K=e=>{const i=Date.now(),n=Math.max(0,16-(i-ei)),s=t.setTimeout(()=>{e(i+n)},n);return ei=i+n,s},ct=e=>clearTimeout(e))}const xt={request:t=>K(t),cancel:t=>ct(t),init:qn};function wt(t,e,i){if(i=i||{},p.string(t)&&t.search(" ")!==-1&&(t=ii(t)),p.array(t))return t.reduce((n,s)=>w(n,wt(s,e,i)),i);if(p.object(t)&&(e=t,t=""),p.func(e))i[t]=i[t]||[],i[t].push(e);else if(p.array(e))for(const n of e)wt(t,n,i);else if(p.object(e))for(const n in e){const s=ii(n).map(r=>`${t}${r}`);wt(s,e[n],i)}return i}function ii(t){return t.trim().split(/ +/)}function ni(t,e){for(const i of e){if(t.immediatePropagationStopped)break;i(t)}}class si{constructor(e){f(this,"options");f(this,"types",{});f(this,"propagationStopped",!1);f(this,"immediatePropagationStopped",!1);f(this,"global");this.options=w({},e||{})}fire(e){let i;const n=this.global;(i=this.types[e.type])&&ni(e,i),!e.propagationStopped&&n&&(i=n[e.type])&&ni(e,i)}on(e,i){const n=wt(e,i);for(e in n)this.types[e]=Qe(this.types[e]||[],n[e])}off(e,i){const n=wt(e,i);for(e in n){const s=this.types[e];if(!(!s||!s.length))for(const r of n[e]){const o=s.indexOf(r);o!==-1&&s.splice(o,1)}}}getRect(e){return null}}function ut(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function ri(t,e){for(;p.element(t);){if(ht(t,e))return t;t=rt(t)}return null}function rt(t){let e=t.parentNode;if(p.docFrag(e)){for(;(e=e.host)&&p.docFrag(e););return e}return e}function ht(t,e){return st!==Ke&&(e=e.replace(/\/deep\//g," ")),t[U.prefixedMatchesSelector](e)}function le(t,e,i){for(;p.element(t);){if(ht(t,e))return!0;if(t=rt(t),t===i)return ht(t,e)}return!1}function oi(t){return t.correspondingUseElement||t}function Gn(t){return t=t||st,{x:t.scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function ce(t){const e=t instanceof j.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function ue(t){const e=ce(t);if(!U.isIOS7&&e){const i=Gn(lt(t));e.left+=i.x,e.right+=i.x,e.top+=i.y,e.bottom+=i.y}return e}function ai(t){return p.string(t)?(j.document.querySelector(t),!0):!1}function li(t,e,i){return t==="parent"?rt(i):t==="self"?e.getRect(i):ri(i,t)}function _t(t,e,i,n){let s=t;return p.string(s)?s=li(s,e,i):p.func(s)&&(s=s(...n)),p.element(s)&&(s=ue(s)),s}function jt(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}}function Un(t){return t&&!("left"in t&&"top"in t)&&(t=w({},t),t.left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t}function ci(t){return t&&!("x"in t&&"y"in t)&&(t=w({},t),t.x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t}function he(t,e,i){t.left&&(e.left+=i.x),t.right&&(e.right+=i.x),t.top&&(e.top+=i.y),t.bottom&&(e.bottom+=i.y),e.width=e.right-e.left,e.height=e.bottom-e.top}function de(t,e,i){const n=t.options[i],r=n&&n.origin||t.options.origin,o=_t(r,t,e,[t&&e]);return jt(o)||{x:0,y:0}}const Nt=(t,e)=>Math.sqrt(t*t+e*e);class ui{constructor(e){f(this,"immediatePropagationStopped",!1);f(this,"propagationStopped",!1);this._interaction=e}preventDefault(){}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}}Object.defineProperty(ui.prototype,"interaction",{get(){return this._interaction._proxy},set(){}});const hi={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};class fe extends ui{constructor(i,n,s,r,o,a,c){super(i);f(this,"relatedTarget",null);f(this,"screenX");f(this,"screenY");f(this,"button");f(this,"buttons");f(this,"ctrlKey");f(this,"shiftKey");f(this,"altKey");f(this,"metaKey");f(this,"page");f(this,"client");f(this,"delta");f(this,"rect");f(this,"x0");f(this,"y0");f(this,"t0");f(this,"dt");f(this,"duration");f(this,"clientX0");f(this,"clientY0");f(this,"velocity");f(this,"speed");f(this,"swipe");f(this,"axes");f(this,"preEnd");o=o||i.element;const l=i.interactable,u=(l&&l.options||hi).deltaSource,d=de(l,o,s),g=r==="start",y=r==="end",b=g?this:i.prevEvent,z=g?i.coords.start:y?{page:b.page,client:b.client,timeStamp:i.coords.cur.timeStamp}:i.coords.cur;this.page=w({},z.page),this.client=w({},z.client),this.rect=w({},i.rect),this.timeStamp=z.timeStamp,y||(this.page.x-=d.x,this.page.y-=d.y,this.client.x-=d.x,this.client.y-=d.y),this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.button=n.button,this.buttons=n.buttons,this.target=o,this.currentTarget=o,this.preEnd=a,this.type=c||s+(r||""),this.interactable=l,this.t0=g?i.pointers[i.pointers.length-1].downTime:b.t0,this.x0=i.coords.start.page.x-d.x,this.y0=i.coords.start.page.y-d.y,this.clientX0=i.coords.start.client.x-d.x,this.clientY0=i.coords.start.client.y-d.y,g||y?this.delta={x:0,y:0}:this.delta={x:this[u].x-b[u].x,y:this[u].y-b[u].y},this.dt=i.coords.delta.timeStamp,this.duration=this.timeStamp-this.t0,this.velocity=w({},i.coords.velocity[u]),this.speed=Nt(this.velocity.x,this.velocity.y),this.swipe=y||r==="inertiastart"?this.getSwipe():null}getSwipe(){const i=this._interaction;if(i.prevEvent.speed<600||this.timeStamp-i.prevEvent.timeStamp>150)return null;let n=180*Math.atan2(i.prevEvent.velocityY,i.prevEvent.velocityX)/Math.PI;const s=22.5;n<0&&(n+=360);const r=135-s<=n&&n<225+s,o=225-s<=n&&n<315+s,a=!r&&(315-s<=n||n<45+s),c=!o&&45-s<=n&&n<135+s;return{up:o,down:c,left:r,right:a,angle:n,speed:i.prevEvent.speed,velocity:{x:i.prevEvent.velocityX,y:i.prevEvent.velocityY}}}preventDefault(){}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}Object.defineProperties(fe.prototype,{pageX:{get(){return this.page.x},set(t){this.page.x=t}},pageY:{get(){return this.page.y},set(t){this.page.y=t}},clientX:{get(){return this.client.x},set(t){this.client.x=t}},clientY:{get(){return this.client.y},set(t){this.client.y=t}},dx:{get(){return this.delta.x},set(t){this.delta.x=t}},dy:{get(){return this.delta.y},set(t){this.delta.y=t}},velocityX:{get(){return this.velocity.x},set(t){this.velocity.x=t}},velocityY:{get(){return this.velocity.y},set(t){this.velocity.y=t}}});function Pt(t,e){let i=!1;return function(){return i||(st.console.warn(e),i=!0),t.apply(this,arguments)}}function di(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t}function fi(t,e){t.__set||(t.__set={});for(const i in e)typeof t[i]!="function"&&i!=="__set"&&Object.defineProperty(t,i,{get(){return i in t.__set?t.__set[i]:t.__set[i]=e[i]},set(n){t.__set[i]=n},configurable:!0});return t}function pe(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function Vn(t,e,i){t.page.x=i.page.x-e.page.x,t.page.y=i.page.y-e.page.y,t.client.x=i.client.x-e.client.x,t.client.y=i.client.y-e.client.y,t.timeStamp=i.timeStamp-e.timeStamp}function Kn(t,e){const i=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/i,t.page.y=e.page.y/i,t.client.x=e.client.x/i,t.client.y=e.client.y/i,t.timeStamp=i}function Jn(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0}function pi(t){return t instanceof j.Event||t instanceof j.Touch}function Ft(t,e,i){return i=i||{},t=t||"page",i.x=e[t+"X"],i.y=e[t+"Y"],i}function Zn(t,e){return e=e||{x:0,y:0},U.isOperaMobile&&pi(t)?(Ft("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):Ft("page",t,e),e}function Qn(t,e){return e=e||{},U.isOperaMobile&&pi(t)?Ft("screen",t,e):Ft("client",t,e),e}function Xt(t){return p.number(t.pointerId)?t.pointerId:t.identifier}function ts(t,e,i){const n=e.length>1?gi(e):e[0];Zn(n,t.page),Qn(n,t.client),t.timeStamp=i}function ge(t){const e=[];return p.array(t)?(e[0]=t[0],e[1]=t[1]):t.type==="touchend"?t.touches.length===1?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):t.touches.length===0&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function gi(t){const e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};for(const i of t)for(const n in e)e[n]+=i[n];for(const i in e)e[i]/=t.length;return e}function es(t){if(!t.length)return null;const e=ge(t),i=Math.min(e[0].pageX,e[1].pageX),n=Math.min(e[0].pageY,e[1].pageY),s=Math.max(e[0].pageX,e[1].pageX),r=Math.max(e[0].pageY,e[1].pageY);return{x:i,y:n,left:i,top:n,right:s,bottom:r,width:s-i,height:r-n}}function is(t,e){const i=e+"X",n=e+"Y",s=ge(t),r=s[0][i]-s[1][i],o=s[0][n]-s[1][n];return Nt(r,o)}function ns(t,e){const i=e+"X",n=e+"Y",s=ge(t),r=s[1][i]-s[0][i],o=s[1][n]-s[0][n];return 180*Math.atan2(o,r)/Math.PI}function ss(t){return p.string(t.pointerType)?t.pointerType:p.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type||"")||t instanceof j.Touch?"touch":"mouse"}function mi(t){const e=p.func(t.composedPath)?t.composedPath():t.path;return[oi(e?e[0]:t.target),oi(t.currentTarget)]}function kt(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}}function me(t,e){if(e.phaselessTypes[t])return!0;for(const i in e.map)if(t.indexOf(i)===0&&t.substr(i.length)in e.phases)return!0;return!1}function rs(t){const e=(i,n)=>{let s=t.interactables.get(i,n);return s||(s=t.interactables.new(i,n),s.events.global=e.globalEvents),s};return e.getPointerAverage=gi,e.getTouchBBox=es,e.getTouchDistance=is,e.getTouchAngle=ns,e.getElementRect=ue,e.getElementClientRect=ce,e.matchesSelector=ht,e.closest=ri,e.globalEvents={},e.version="1.10.17",e.scope=t,e.use=function(i,n){return this.scope.usePlugin(i,n),this},e.isSet=function(i,n){return!!this.scope.interactables.get(i,n&&n.context)},e.on=Pt(function(n,s,r){if(p.string(n)&&n.search(" ")!==-1&&(n=n.trim().split(/ +/)),p.array(n)){for(const o of n)this.on(o,s,r);return this}if(p.object(n)){for(const o in n)this.on(o,n[o],s);return this}return me(n,this.scope.actions)?this.globalEvents[n]?this.globalEvents[n].push(s):this.globalEvents[n]=[s]:this.scope.events.add(this.scope.document,n,s,{options:r}),this},"The interact.on() method is being deprecated"),e.off=Pt(function(n,s,r){if(p.string(n)&&n.search(" ")!==-1&&(n=n.trim().split(/ +/)),p.array(n)){for(const o of n)this.off(o,s,r);return this}if(p.object(n)){for(const o in n)this.off(o,n[o],s);return this}if(me(n,this.scope.actions)){let o;n in this.globalEvents&&(o=this.globalEvents[n].indexOf(s))!==-1&&this.globalEvents[n].splice(o,1)}else this.scope.events.remove(this.scope.document,n,s,r);return this},"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return U.supportsTouch},e.supportsPointerEvent=function(){return U.supportsPointerEvent},e.stop=function(){for(const i of this.scope.interactions.list)i.stop();return this},e.pointerMoveTolerance=function(i){return p.number(i)?(this.scope.interactions.pointerMoveTolerance=i,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(i,n){this.scope.addDocument(i,n)},e.removeDocument=function(i){this.scope.removeDocument(i)},e}class os{constructor(e,i,n,s){f(this,"options");f(this,"_actions");f(this,"target");f(this,"events",new si);f(this,"_context");f(this,"_win");f(this,"_doc");f(this,"_scopeEvents");f(this,"_rectChecker");this._actions=i.actions,this.target=e,this._context=i.context||n,this._win=lt(ai(e)?this._context:e),this._doc=this._win.document,this._scopeEvents=s,this.set(i)}get _defaults(){return{base:{},perAction:{},actions:{}}}setOnEvents(e,i){return p.func(i.onstart)&&this.on(`${e}start`,i.onstart),p.func(i.onmove)&&this.on(`${e}move`,i.onmove),p.func(i.onend)&&this.on(`${e}end`,i.onend),p.func(i.oninertiastart)&&this.on(`${e}inertiastart`,i.oninertiastart),this}updatePerActionListeners(e,i,n){(p.array(i)||p.object(i))&&this.off(e,i),(p.array(n)||p.object(n))&&this.on(e,n)}setPerAction(e,i){const n=this._defaults;for(const s in i){const r=s,o=this.options[e],a=i[r];r==="listeners"&&this.updatePerActionListeners(e,o.listeners,a),p.array(a)?o[r]=ti(a):p.plainObject(a)?(o[r]=w(o[r]||{},vt(a)),p.object(n.perAction[r])&&"enabled"in n.perAction[r]&&(o[r].enabled=a.enabled!==!1)):p.bool(a)&&p.object(n.perAction[r])?o[r].enabled=a:o[r]=a}}getRect(e){return e=e||(p.element(this.target)?this.target:null),p.string(this.target)&&(e=e||this._context.querySelector(this.target)),ue(e)}rectChecker(e){return p.func(e)?(this._rectChecker=e,this.getRect=i=>{const n=w({},this._rectChecker(i));return"width"in n||(n.width=n.right-n.left,n.height=n.bottom-n.top),n},this):e===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}_backCompatOption(e,i){if(ai(i)||p.object(i)){this.options[e]=i;for(const n in this._actions.map)this.options[n][e]=i;return this}return this.options[e]}origin(e){return this._backCompatOption("origin",e)}deltaSource(e){return e==="page"||e==="client"?(this.options.deltaSource=e,this):this.options.deltaSource}context(){return this._context}inContext(e){return this._context===e.ownerDocument||ut(this._context,e)}testIgnoreAllow(e,i,n){return!this.testIgnore(e.ignoreFrom,i,n)&&this.testAllow(e.allowFrom,i,n)}testAllow(e,i,n){return e?p.element(n)?p.string(e)?le(n,e,i):p.element(e)?ut(e,n):!1:!1:!0}testIgnore(e,i,n){return!e||!p.element(n)?!1:p.string(e)?le(n,e,i):p.element(e)?ut(e,n):!1}fire(e){return this.events.fire(e),this}_onOff(e,i,n,s){p.object(i)&&!p.array(i)&&(s=n,n=null);const r=e==="on"?"add":"remove",o=wt(i,n);for(let a in o){a==="wheel"&&(a=U.wheelEvent);for(const c of o[a])me(a,this._actions)?this.events[e](a,c):p.string(this.target)?this._scopeEvents[`${r}Delegate`](this.target,this._context,a,c,s):this._scopeEvents[r](this.target,a,c,s)}return this}on(e,i,n){return this._onOff("on",e,i,n)}off(e,i,n){return this._onOff("off",e,i,n)}set(e){const i=this._defaults;p.object(e)||(e={}),this.options=vt(i.base);for(const n in this._actions.methodDict){const s=n,r=this._actions.methodDict[s];this.options[s]={},this.setPerAction(s,w(w({},i.perAction),i.actions[s])),this[r](e[s])}for(const n in e)p.func(this[n])&&this[n](e[n]);return this}unset(){if(p.string(this.target))for(const e in this._scopeEvents.delegatedEvents){const i=this._scopeEvents.delegatedEvents[e];for(let n=i.length-1;n>=0;n--){const{selector:s,context:r,listeners:o}=i[n];s===this.target&&r===this._context&&i.splice(n,1);for(let a=o.length-1;a>=0;a--)this._scopeEvents.removeDelegate(this.target,this._context,e,o[a][0],o[a][1])}}else this._scopeEvents.remove(this.target,"all")}}class as{constructor(e){f(this,"list",[]);f(this,"selectorMap",{});f(this,"scope");this.scope=e,e.addListeners({"interactable:unset":({interactable:i})=>{const{target:n,_context:s}=i,r=p.string(n)?this.selectorMap[n]:n[this.scope.id],o=Wt(r,a=>a.context===s);r[o]&&(r[o].context=null,r[o].interactable=null),r.splice(o,1)}})}new(e,i){i=w(i||{},{actions:this.scope.actions});const n=new this.scope.Interactable(e,i,this.scope.document,this.scope.events),s={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),p.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(s)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(s)),this.scope.fire("interactable:new",{target:e,options:i,interactable:n,win:this.scope._win}),n}get(e,i){const n=i&&i.context||this.scope.document,s=p.string(e),r=s?this.selectorMap[e]:e[this.scope.id];if(!r)return null;const o=ae(r,a=>a.context===n&&(s||a.interactable.inContext(e)));return o&&o.interactable}forEachMatch(e,i){for(const n of this.list){let s;if((p.string(n.target)?p.element(e)&&ht(e,n.target):e===n.target)&&n.inContext(e)&&(s=i(n)),s!==void 0)return s}}}function ls(t){var e;const i=[],n={},s=[],r={add:o,remove:a,addDelegate:c,removeDelegate:l,delegateListener:u,delegateUseCapture:d,delegatedEvents:n,documents:s,targets:i,supportsOptions:!1,supportsPassive:!1};(e=t.document)==null||e.createElement("div").addEventListener("test",null,{get capture(){return r.supportsOptions=!0},get passive(){return r.supportsPassive=!0}}),t.events=r;function o(g,y,b,z){const T=$t(z);let P=ae(i,E=>E.eventTarget===g);P||(P={eventTarget:g,events:{}},i.push(P)),P.events[y]||(P.events[y]=[]),g.addEventListener&&!Yn(P.events[y],b)&&(g.addEventListener(y,b,r.supportsOptions?T:T.capture),P.events[y].push(b))}function a(g,y,b,z){const T=$t(z),P=Wt(i,h=>h.eventTarget===g),E=i[P];if(!E||!E.events)return;if(y==="all"){for(y in E.events)E.events.hasOwnProperty(y)&&a(g,y,"all");return}let I=!1;const m=E.events[y];if(m){if(b==="all"){for(let h=m.length-1;h>=0;h--)a(g,y,m[h],T);return}else for(let h=0;h<m.length;h++)if(m[h]===b){g.removeEventListener(y,b,r.supportsOptions?T:T.capture),m.splice(h,1),m.length===0&&(delete E.events[y],I=!0);break}}I&&!Object.keys(E.events).length&&i.splice(P,1)}function c(g,y,b,z,T){const P=$t(T);if(!n[b]){n[b]=[];for(const m of s)o(m,b,u),o(m,b,d,!0)}const E=n[b];let I=ae(E,m=>m.selector===g&&m.context===y);I||(I={selector:g,context:y,listeners:[]},E.push(I)),I.listeners.push([z,P])}function l(g,y,b,z,T){const P=$t(T),E=n[b];let I=!1,m;if(E)for(m=E.length-1;m>=0;m--){const h=E[m];if(h.selector===g&&h.context===y){const{listeners:M}=h;for(let v=M.length-1;v>=0;v--){const[O,{capture:A,passive:_}]=M[v];if(O===z&&A===P.capture&&_===P.passive){M.splice(v,1),M.length||(E.splice(m,1),a(y,b,u),a(y,b,d,!0)),I=!0;break}}if(I)break}}}function u(g,y){const b=$t(y),z=new cs(g),T=n[g.type],[P]=mi(g);let E=P;for(;p.element(E);){for(let I=0;I<T.length;I++){const m=T[I],{selector:h,context:M}=m;if(ht(E,h)&&ut(M,P)&&ut(M,E)){const{listeners:v}=m;z.currentTarget=E;for(const[O,{capture:A,passive:_}]of v)A===b.capture&&_===b.passive&&O(z)}}E=rt(E)}}function d(g){return u.call(this,g,!0)}return r}class cs{constructor(e){f(this,"currentTarget");f(this,"originalEvent");f(this,"type");this.originalEvent=e,fi(this,e)}preventOriginalDefault(){this.originalEvent.preventDefault()}stopPropagation(){this.originalEvent.stopPropagation()}stopImmediatePropagation(){this.originalEvent.stopImmediatePropagation()}}function $t(t){if(!p.object(t))return{capture:!!t,passive:!1};const e=w({},t);return e.capture=!!t.capture,e.passive=!!t.passive,e}const us={id:"events",install:ls};class hs{constructor(e,i,n,s,r){f(this,"id");f(this,"pointer");f(this,"event");f(this,"downTime");f(this,"downTarget");this.id=e,this.pointer=i,this.event=n,this.downTime=s,this.downTarget=r}}let ye;(function(t){t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy=""})(ye||(ye={}));let be;(function(t){t.start="",t.move="",t.end="",t.stop="",t.interacting=""})(be||(be={}));let ds=0;class fs{constructor({pointerType:e,scopeFire:i}){f(this,"interactable",null);f(this,"element",null);f(this,"rect",null);f(this,"_rects");f(this,"edges",null);f(this,"_scopeFire");f(this,"prepared",{name:null,axis:null,edges:null});f(this,"pointerType");f(this,"pointers",[]);f(this,"downEvent",null);f(this,"downPointer",{});f(this,"_latestPointer",{pointer:null,event:null,eventTarget:null});f(this,"prevEvent",null);f(this,"pointerIsDown",!1);f(this,"pointerWasMoved",!1);f(this,"_interacting",!1);f(this,"_ending",!1);f(this,"_stopped",!0);f(this,"_proxy",null);f(this,"simulation",null);f(this,"doMove",Pt(function(e){this.move(e)},"The interaction.doMove() method has been renamed to interaction.move()"));f(this,"coords",{start:kt(),prev:kt(),cur:kt(),delta:kt(),velocity:kt()});f(this,"_id",ds++);this._scopeFire=i,this.pointerType=e;const n=this;this._proxy={};for(const s in ye)Object.defineProperty(this._proxy,s,{get(){return n[s]}});for(const s in be)Object.defineProperty(this._proxy,s,{value:(...r)=>n[s](...r)});this._scopeFire("interactions:new",{interaction:this})}get pointerMoveTolerance(){return 1}pointerDown(e,i,n){const s=this.updatePointer(e,i,n,!0),r=this.pointers[s];this._scopeFire("interactions:down",{pointer:e,event:i,eventTarget:n,pointerIndex:s,pointerInfo:r,type:"down",interaction:this})}start(e,i,n){return this.interacting()||!this.pointerIsDown||this.pointers.length<(e.name==="gesture"?2:1)||!i.options[e.name].enabled?!1:(di(this.prepared,e),this.interactable=i,this.element=n,this.rect=i.getRect(n),this.edges=this.prepared.edges?w({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}pointerMove(e,i,n){!this.simulation&&!(this.modification&&this.modification.endResult)&&this.updatePointer(e,i,n,!1);const s=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;let r,o;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,o=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Nt(r,o)>this.pointerMoveTolerance);const a=this.getPointerIndex(e),c={pointer:e,pointerIndex:a,pointerInfo:this.pointers[a],event:i,type:"move",eventTarget:n,dx:r,dy:o,duplicate:s,interaction:this};s||Kn(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",c),!s&&!this.simulation&&(this.interacting()&&(c.type=null,this.move(c)),this.pointerWasMoved&&pe(this.coords.prev,this.coords.cur))}move(e){(!e||!e.event)&&Jn(this.coords.delta),e=w({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{}),e.phase="move",this._doPhase(e)}pointerUp(e,i,n,s){let r=this.getPointerIndex(e);r===-1&&(r=this.updatePointer(e,i,n,!1));const o=/cancel$/i.test(i.type)?"cancel":"up";this._scopeFire(`interactions:${o}`,{pointer:e,pointerIndex:r,pointerInfo:this.pointers[r],event:i,eventTarget:n,type:o,curEventTarget:s,interaction:this}),this.simulation||this.end(i),this.removePointer(e,i)}documentBlur(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}end(e){this._ending=!0,e=e||this._latestPointer.event;let i;this.interacting()&&(i=this._doPhase({event:e,interaction:this,phase:"end"})),this._ending=!1,i===!0&&this.stop()}currentAction(){return this._interacting?this.prepared.name:null}interacting(){return this._interacting}stop(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}getPointerIndex(e){const i=Xt(e);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Wt(this.pointers,n=>n.id===i)}getPointerInfo(e){return this.pointers[this.getPointerIndex(e)]}updatePointer(e,i,n,s){const r=Xt(e);let o=this.getPointerIndex(e),a=this.pointers[o];return s=s===!1?!1:s||/(down|start)$/i.test(i.type),a?a.pointer=e:(a=new hs(r,e,i,null,null),o=this.pointers.length,this.pointers.push(a)),ts(this.coords.cur,this.pointers.map(c=>c.pointer),this._now()),Vn(this.coords.delta,this.coords.prev,this.coords.cur),s&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,fi(this.downPointer,e),this.interacting()||(pe(this.coords.start,this.coords.cur),pe(this.coords.prev,this.coords.cur),this.downEvent=i,this.pointerWasMoved=!1)),this._updateLatestPointer(e,i,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:i,eventTarget:n,down:s,pointerInfo:a,pointerIndex:o,interaction:this}),o}removePointer(e,i){const n=this.getPointerIndex(e);if(n===-1)return;const s=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:i,eventTarget:null,pointerIndex:n,pointerInfo:s,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}_updateLatestPointer(e,i,n){this._latestPointer.pointer=e,this._latestPointer.event=i,this._latestPointer.eventTarget=n}destroy(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}_createPreparedEvent(e,i,n,s){return new fe(this,e,this.prepared.name,i,this.element,n,s)}_fireEvent(e){var i;(i=this.interactable)==null||i.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}_doPhase(e){const{event:i,phase:n,preEnd:s,type:r}=e,{rect:o}=this;if(o&&n==="move"&&(he(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),this._scopeFire(`interactions:before-action-${n}`,e)===!1)return!1;const c=e.iEvent=this._createPreparedEvent(i,n,s,r);return this._scopeFire(`interactions:action-${n}`,e),n==="start"&&(this.prevEvent=c),this._fireEvent(c),this._scopeFire(`interactions:after-action-${n}`,e),!0}_now(){return Date.now()}}const ps=fs;function gs(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):p.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function ms(t,e,i){const n=t.options.preventDefault;if(n!=="never"){if(n==="always"){i.preventDefault();return}if(e.events.supportsPassive&&/^touch(start|move)$/.test(i.type)){const s=lt(i.target).document,r=e.getDocOptions(s);if(!(r&&r.events)||r.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(i.type)||p.element(i.target)&&ht(i.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||i.preventDefault()}}function ys({interaction:t,event:e}){t.interactable&&t.interactable.checkAndPreventDefault(e)}function bs(t){const{Interactable:e}=t;e.prototype.preventDefault=gs,e.prototype.checkAndPreventDefault=function(i){return ms(this,t,i)},t.interactions.docEvents.push({type:"dragstart",listener(i){for(const n of t.interactions.list)if(n.element&&(n.element===i.target||ut(n.element,i.target))){n.interactable.checkAndPreventDefault(i);return}}})}const vs={id:"core/interactablePreventDefault",install:bs,listeners:["down","move","up","cancel"].reduce((t,e)=>(t[`interactions:${e}`]=ys,t),{})},ve={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search(t){for(const e of ve.methodOrder){const i=ve[e](t);if(i)return i}return null},simulationResume({pointerType:t,eventType:e,eventTarget:i,scope:n}){if(!/down|start/i.test(e))return null;for(const s of n.interactions.list){let r=i;if(s.simulation&&s.simulation.allowResume&&s.pointerType===t)for(;r;){if(r===s.element)return s;r=rt(r)}}return null},mouseOrPen({pointerId:t,pointerType:e,eventType:i,scope:n}){if(e!=="mouse"&&e!=="pen")return null;let s;for(const r of n.interactions.list)if(r.pointerType===e){if(r.simulation&&!yi(r,t))continue;if(r.interacting())return r;s||(s=r)}if(s)return s;for(const r of n.interactions.list)if(r.pointerType===e&&!(/down/i.test(i)&&r.simulation))return r;return null},hasPointer({pointerId:t,scope:e}){for(const i of e.interactions.list)if(yi(i,t))return i;return null},idle({pointerType:t,scope:e}){for(const i of e.interactions.list){if(i.pointers.length===1){const n=i.interactable;if(n&&!(n.options.gesture&&n.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&t===i.pointerType)return i}return null}};function yi(t,e){return t.pointers.some(({id:i})=>i===e)}const xs=ve,bi=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function ws(t){const e={};for(const r of bi)e[r]=vi(r,t);const i=U.pEventTypes;let n;j.PointerEvent?n=[{type:i.down,listener:s},{type:i.down,listener:e.pointerDown},{type:i.move,listener:e.pointerMove},{type:i.up,listener:e.pointerUp},{type:i.cancel,listener:e.pointerUp}]:n=[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:s},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}],n.push({type:"blur",listener(r){for(const o of t.interactions.list)o.documentBlur(r)}}),t.prevTouchTime=0,t.Interaction=class extends ps{get pointerMoveTolerance(){return t.interactions.pointerMoveTolerance}set pointerMoveTolerance(r){t.interactions.pointerMoveTolerance=r}_now(){return t.now()}},t.interactions={list:[],new(r){r.scopeFire=(a,c)=>t.fire(a,c);const o=new t.Interaction(r);return t.interactions.list.push(o),o},listeners:e,docEvents:n,pointerMoveTolerance:1};function s(){for(const r of t.interactions.list)if(!(!r.pointerIsDown||r.pointerType!=="touch"||r._interacting))for(const o of r.pointers)t.documents.some(({doc:a})=>ut(a,o.downTarget))||r.removePointer(o.pointer,o.event)}t.usePlugin(vs)}function vi(t,e){return function(i){const n=e.interactions.list,s=ss(i),[r,o]=mi(i),a=[];if(/^touch/.test(i.type)){e.prevTouchTime=e.now();for(const c of i.changedTouches){const l=c,u=Xt(l),d={pointer:l,pointerId:u,pointerType:s,eventType:i.type,eventTarget:r,curEventTarget:o,scope:e},g=xi(d);a.push([d.pointer,d.eventTarget,d.curEventTarget,g])}}else{let c=!1;if(!U.supportsPointerEvent&&/mouse/.test(i.type)){for(let l=0;l<n.length&&!c;l++)c=n[l].pointerType!=="mouse"&&n[l].pointerIsDown;c=c||e.now()-e.prevTouchTime<500||i.timeStamp===0}if(!c){const l={pointer:i,pointerId:Xt(i),pointerType:s,eventType:i.type,curEventTarget:o,eventTarget:r,scope:e},u=xi(l);a.push([l.pointer,l.eventTarget,l.curEventTarget,u])}}for(const[c,l,u,d]of a)d[t](c,i,l,u)}}function xi(t){const{pointerType:e,scope:i}=t,s={interaction:xs.search(t),searchDetails:t};return i.fire("interactions:find",s),s.interaction||i.interactions.new({pointerType:e})}function xe({doc:t,scope:e,options:i},n){const{interactions:{docEvents:s},events:r}=e,o=r[n];e.browser.isIOS&&!i.events&&(i.events={passive:!1});for(const c in r.delegatedEvents)o(t,c,r.delegateListener),o(t,c,r.delegateUseCapture,!0);const a=i&&i.events;for(const{type:c,listener:l}of s)o(t,c,l,a)}const Ss={id:"core/interactions",install:ws,listeners:{"scope:add-document":t=>xe(t,"add"),"scope:remove-document":t=>xe(t,"remove"),"interactable:unset":({interactable:t},e)=>{for(let i=e.interactions.list.length-1;i>=0;i--){const n=e.interactions.list[i];n.interactable===t&&(n.stop(),e.fire("interactions:destroy",{interaction:n}),n.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(i,1))}}},onDocSignal:xe,doOnInteractions:vi,methodNames:bi};class Es{constructor(){f(this,"id",`__interact_scope_${Math.floor(Math.random()*100)}`);f(this,"isInitialized",!1);f(this,"listenerMaps",[]);f(this,"browser",U);f(this,"defaults",vt(hi));f(this,"Eventable",si);f(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}});f(this,"interactStatic",rs(this));f(this,"InteractEvent",fe);f(this,"Interactable");f(this,"interactables",new as(this));f(this,"_win");f(this,"document");f(this,"window");f(this,"documents",[]);f(this,"_plugins",{list:[],map:{}});f(this,"onWindowUnload",e=>this.removeDocument(e.target));const e=this;this.Interactable=class extends os{get _defaults(){return e.defaults}set(i){return super.set(i),e.fire("interactable:set",{options:i,interactable:this}),this}unset(){super.unset();const i=e.interactables.list.indexOf(this);i<0||(super.unset(),e.interactables.list.splice(i,1),e.fire("interactable:unset",{interactable:this}))}}}addListeners(e,i){this.listenerMaps.push({id:i,map:e})}fire(e,i){for(const{map:{[e]:n}}of this.listenerMaps)if(n&&n(i,this,e)===!1)return!1}init(e){return this.isInitialized?this:zs(this,e)}pluginIsInstalled(e){return this._plugins.map[e.id]||this._plugins.list.indexOf(e)!==-1}usePlugin(e,i){if(!this.isInitialized)return this;if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,i),e.listeners&&e.before){let n=0;const s=this.listenerMaps.length,r=e.before.reduce((o,a)=>(o[a]=!0,o[wi(a)]=!0,o),{});for(;n<s;n++){const o=this.listenerMaps[n].id;if(r[o]||r[wi(o)])break}this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}addDocument(e,i){if(this.getDocIndex(e)!==-1)return!1;const n=lt(e);i=i?w({},i):{},this.documents.push({doc:e,options:i}),this.events.documents.push(e),e!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:n,scope:this,options:i})}removeDocument(e){const i=this.getDocIndex(e),n=lt(e),s=this.documents[i].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(i,1),this.events.documents.splice(i,1),this.fire("scope:remove-document",{doc:e,window:n,scope:this,options:s})}getDocIndex(e){for(let i=0;i<this.documents.length;i++)if(this.documents[i].doc===e)return i;return-1}getDocOptions(e){const i=this.getDocIndex(e);return i===-1?null:this.documents[i].options}now(){return(this.window.Date||Date).now()}}function zs(t,e){return t.isInitialized=!0,p.window(e)&&Je(e),j.init(e),U.init(e),xt.init(e),t.window=e,t.document=e.document,t.usePlugin(Ss),t.usePlugin(us),t}function wi(t){return t&&t.replace(/\/.*$/,"")}const Si=new Es,J=Si.interactStatic,Is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:globalThis;Si.init(Is);function Ts(t){const{Interactable:e}=t;e.prototype.getAction=function(n,s,r,o){const a=Ms(this,s,r,o,t);return this.options.actionChecker?this.options.actionChecker(n,s,a,this,o,r):a},e.prototype.ignoreFrom=Pt(function(i){return this._backCompatOption("ignoreFrom",i)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=Pt(function(i){return this._backCompatOption("allowFrom",i)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=Cs,e.prototype.styleCursor=Ds}function Ms(t,e,i,n,s){const r=t.getRect(n),o=e.buttons||{0:1,1:4,3:8,4:16}[e.button],a={action:null,interactable:t,interaction:i,element:n,rect:r,buttons:o};return s.fire("auto-start:check",a),a.action}function Ds(t){return p.bool(t)?(this.options.styleCursor=t,this):t===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Cs(t){return p.func(t)?(this.options.actionChecker=t,this):t===null?(delete this.options.actionChecker,this):this.options.actionChecker}const Rs={id:"auto-start/interactableMethods",install:Ts};function _s(t){const{interactStatic:e,defaults:i}=t;t.usePlugin(Rs),i.base.actionChecker=null,i.base.styleCursor=!0,w(i.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=n=>Ti(n,t),t.autoStart={maxInteractions:1/0,withinInteractionLimit:Yt,cursorElement:null}}function Ps({interaction:t,pointer:e,event:i,eventTarget:n},s){if(t.interacting())return;const r=zi(t,e,i,n,s);Ii(t,r,s)}function ks({interaction:t,pointer:e,event:i,eventTarget:n},s){if(t.pointerType!=="mouse"||t.pointerIsDown||t.interacting())return;const r=zi(t,e,i,n,s);Ii(t,r,s)}function $s(t,e){const{interaction:i}=t;if(!i.pointerIsDown||i.interacting()||!i.pointerWasMoved||!i.prepared.name)return;e.fire("autoStart:before-start",t);const{interactable:n}=i,s=i.prepared.name;s&&n&&(n.options[s].manualStart||!Yt(n,i.element,i.prepared,e)?i.stop():(i.start(i.prepared,n,i.element),Mi(i,e)))}function Os({interaction:t},e){const{interactable:i}=t;i&&i.options.styleCursor&&we(t.element,"",e)}function Ei(t,e,i,n,s){return e.testIgnoreAllow(e.options[t.name],i,n)&&e.options[t.name].enabled&&Yt(e,i,t,s)?t:null}function Hs(t,e,i,n,s,r,o){for(let a=0,c=n.length;a<c;a++){const l=n[a],u=s[a],d=l.getAction(e,i,t,u);if(!d)continue;const g=Ei(d,l,u,r,o);if(g)return{action:g,interactable:l,element:u}}return{action:null,interactable:null,element:null}}function zi(t,e,i,n,s){let r=[],o=[],a=n;function c(l){r.push(l),o.push(a)}for(;p.element(a);){r=[],o=[],s.interactables.forEachMatch(a,c);const l=Hs(t,e,i,r,o,n,s);if(l.action&&!l.interactable.options[l.action.name].manualStart)return l;a=rt(a)}return{action:null,interactable:null,element:null}}function Ii(t,{action:e,interactable:i,element:n},s){e=e||{name:null},t.interactable=i,t.element=n,di(t.prepared,e),t.rect=i&&e.name?i.getRect(n):null,Mi(t,s),s.fire("autoStart:prepared",{interaction:t})}function Yt(t,e,i,n){const s=t.options,r=s[i.name].max,o=s[i.name].maxPerElement,a=n.autoStart.maxInteractions;let c=0,l=0,u=0;if(!(r&&o&&a))return!1;for(const d of n.interactions.list){const g=d.prepared.name;if(d.interacting()){if(c++,c>=a)return!1;if(d.interactable===t&&(l+=g===i.name?1:0,l>=r||d.element===e&&(u++,g===i.name&&u>=o)))return!1}}return a>0}function Ti(t,e){return p.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function we(t,e,i){const{cursorElement:n}=i.autoStart;n&&n!==t&&(n.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,i.autoStart.cursorElement=e?t:null}function Mi(t,e){const{interactable:i,element:n,prepared:s}=t;if(!(t.pointerType==="mouse"&&i&&i.options.styleCursor)){e.autoStart.cursorElement&&we(e.autoStart.cursorElement,"",e);return}let r="";if(s.name){const o=i.options[s.name].cursorChecker;p.func(o)?r=o(s,i,n,t._interacting):r=e.actions.map[s.name].getCursor(s)}we(t.element,r||"",e)}const Se={id:"auto-start/base",before:["actions"],install:_s,listeners:{"interactions:down":Ps,"interactions:move":(t,e)=>{ks(t,e),$s(t,e)},"interactions:stop":Os},maxInteractions:Ti,withinInteractionLimit:Yt,validateAction:Ei};function As({interaction:t,eventTarget:e,dx:i,dy:n},s){if(t.prepared.name!=="drag")return;const r=Math.abs(i),o=Math.abs(n),a=t.interactable.options.drag,c=a.startAxis,l=r>o?"x":r<o?"y":"xy";if(t.prepared.axis=a.lockAxis==="start"?l[0]:a.lockAxis,l!=="xy"&&c!=="xy"&&c!==l){t.prepared.name=null;let u=e;const d=function(g){if(g===t.interactable)return;const y=t.interactable.options.drag;if(!y.manualStart&&g.testIgnoreAllow(y,u,e)){const b=g.getAction(t.downPointer,t.downEvent,t,u);if(b&&b.name==="drag"&&Bs(l,g)&&Se.validateAction(b,g,u,e,s))return g}};for(;p.element(u);){const g=s.interactables.forEachMatch(u,d);if(g){t.prepared.name="drag",t.interactable=g,t.element=u;break}u=rt(u)}}}function Bs(t,e){if(!e)return!1;const i=e.options.drag.startAxis;return t==="xy"||i==="xy"||i===t}const Ls={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":As}};function Ws(t){const{defaults:e}=t;t.usePlugin(Se),e.perAction.hold=0,e.perAction.delay=0}function Ee(t){const e=t.prepared&&t.prepared.name;if(!e)return null;const i=t.interactable.options;return i[e].hold||i[e].delay}const js={id:"auto-start/hold",install:Ws,listeners:{"interactions:new":({interaction:t})=>{t.autoStartHoldTimer=null},"autoStart:prepared":({interaction:t})=>{const e=Ee(t);e>0&&(t.autoStartHoldTimer=setTimeout(()=>{t.start(t.prepared,t.interactable,t.element)},e))},"interactions:move":({interaction:t,duplicate:e})=>{t.autoStartHoldTimer&&t.pointerWasMoved&&!e&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":({interaction:t})=>{Ee(t)>0&&(t.prepared.name=null)}},getHoldDuration:Ee},Ns={id:"auto-start",install(t){t.usePlugin(Se),t.usePlugin(js),t.usePlugin(Ls)}};J.use(Ns);function Fs(t){const{defaults:e,actions:i}=t;t.autoScroll=S,S.now=()=>t.now(),i.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=S.defaults}const S={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start(t){S.isScrolling=!0,xt.cancel(S.i),t.autoScroll=S,S.interaction=t,S.prevTime=S.now(),S.i=xt.request(S.scroll)},stop(){S.isScrolling=!1,S.interaction&&(S.interaction.autoScroll=null),xt.cancel(S.i)},scroll(){const{interaction:t}=S,{interactable:e,element:i}=t,n=t.prepared.name,s=e.options[n].autoScroll,r=Di(s.container,e,i),o=S.now(),a=(o-S.prevTime)/1e3,c=s.speed*a;if(c>=1){const l={x:S.x*c,y:S.y*c};if(l.x||l.y){const u=Ci(r);p.window(r)?r.scrollBy(l.x,l.y):r&&(r.scrollLeft+=l.x,r.scrollTop+=l.y);const d=Ci(r),g={x:d.x-u.x,y:d.y-u.y};(g.x||g.y)&&e.fire({type:"autoscroll",target:i,interactable:e,delta:g,interaction:t,container:r})}S.prevTime=o}S.isScrolling&&(xt.cancel(S.i),S.i=xt.request(S.scroll))},check(t,e){var i;return(i=t.options[e].autoScroll)==null?void 0:i.enabled},onInteractionMove({interaction:t,pointer:e}){if(!(t.interacting()&&S.check(t.interactable,t.prepared.name)))return;if(t.simulation){S.x=S.y=0;return}let i,n,s,r;const{interactable:o,element:a}=t,c=t.prepared.name,l=o.options[c].autoScroll,u=Di(l.container,o,a);if(p.window(u))r=e.clientX<S.margin,i=e.clientY<S.margin,n=e.clientX>u.innerWidth-S.margin,s=e.clientY>u.innerHeight-S.margin;else{const d=ce(u);r=e.clientX<d.left+S.margin,i=e.clientY<d.top+S.margin,n=e.clientX>d.right-S.margin,s=e.clientY>d.bottom-S.margin}S.x=n?1:r?-1:0,S.y=s?1:i?-1:0,S.isScrolling||(S.margin=l.margin,S.speed=l.speed,S.start(t))}};function Di(t,e,i){return(p.string(t)?li(t,e,i):t)||lt(i)}function Ci(t){return p.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}const Xs={id:"auto-scroll",install:Fs,listeners:{"interactions:new":({interaction:t})=>{t.autoScroll=null},"interactions:destroy":({interaction:t})=>{t.autoScroll=null,S.stop(),S.interaction&&(S.interaction=null)},"interactions:stop":S.stop,"interactions:action-move":t=>S.onInteractionMove(t)}};J.use(Xs);function Ys(t){const{actions:e,Interactable:i,defaults:n}=t;i.prototype.draggable=qt.draggable,e.map.drag=qt,e.methodDict.drag="draggable",n.actions.drag=qt.defaults}function ze({interaction:t}){if(t.prepared.name!=="drag")return;const e=t.prepared.axis;e==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):e==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}function Ri({iEvent:t,interaction:e}){if(e.prepared.name!=="drag")return;const i=e.prepared.axis;if(i==="x"||i==="y"){const n=i==="x"?"y":"x";t.page[n]=e.coords.start.page[n],t.client[n]=e.coords.start.client[n],t.delta[n]=0}}const qt={id:"actions/drag",install:Ys,listeners:{"interactions:before-action-move":ze,"interactions:action-resume":ze,"interactions:action-move":Ri,"auto-start:check":t=>{const{interaction:e,interactable:i,buttons:n}=t,s=i.options.drag;if(!(!(s&&s.enabled)||e.pointerIsDown&&/mouse|pointer/.test(e.pointerType)&&!(n&i.options.drag.mouseButtons)))return t.action={name:"drag",axis:s.lockAxis==="start"?s.startAxis:s.lockAxis},!1}},draggable:function(e){return p.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):p.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:ze,move:Ri,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor(){return"move"}},qs=qt;J.use(qs);function Gs(t){const{actions:e,browser:i,Interactable:n,defaults:s}=t;Z.cursors=Js(i),Z.defaultMargin=i.supportsTouch||i.supportsPointerEvent?20:10,n.prototype.resizable=function(r){return Vs(this,r,t)},e.map.resize=Z,e.methodDict.resize="resizable",s.actions.resize=Z.defaults}function Us(t){const{interaction:e,interactable:i,element:n,rect:s,buttons:r}=t;if(!s)return;const o=w({},e.coords.cur.page),a=i.options.resize;if(!(!(a&&a.enabled)||e.pointerIsDown&&/mouse|pointer/.test(e.pointerType)&&!(r&a.mouseButtons))){if(p.object(a.edges)){const c={left:!1,right:!1,top:!1,bottom:!1};for(const l in c)c[l]=Ks(l,a.edges[l],o,e._latestPointer.eventTarget,n,s,a.margin||Z.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(t.action={name:"resize",edges:c})}else{const c=a.axis!=="y"&&o.x>s.right-Z.defaultMargin,l=a.axis!=="x"&&o.y>s.bottom-Z.defaultMargin;(c||l)&&(t.action={name:"resize",axes:(c?"x":"")+(l?"y":"")})}return t.action?!1:void 0}}function Vs(t,e,i){return p.object(e)?(t.options.resize.enabled=e.enabled!==!1,t.setPerAction("resize",e),t.setOnEvents("resize",e),p.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:e.axis===null&&(t.options.resize.axis=i.defaults.actions.resize.axis),p.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:p.bool(e.square)&&(t.options.resize.square=e.square),t):p.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}function Ks(t,e,i,n,s,r,o){if(!e)return!1;if(e===!0){const a=p.number(r.width)?r.width:r.right-r.left,c=p.number(r.height)?r.height:r.bottom-r.top;if(o=Math.min(o,Math.abs((t==="left"||t==="right"?a:c)/2)),a<0&&(t==="left"?t="right":t==="right"&&(t="left")),c<0&&(t==="top"?t="bottom":t==="bottom"&&(t="top")),t==="left"){const l=a>=0?r.left:r.right;return i.x<l+o}if(t==="top"){const l=c>=0?r.top:r.bottom;return i.y<l+o}if(t==="right")return i.x>(a>=0?r.right:r.left)-o;if(t==="bottom")return i.y>(c>=0?r.bottom:r.top)-o}return p.element(n)?p.element(e)?e===n:le(n,e,s):!1}function Js(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}function Zs({iEvent:t,interaction:e}){if(e.prepared.name!=="resize"||!e.prepared.edges)return;const i=t,n=e.rect;e._rects={start:w({},n),corrected:w({},n),previous:w({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=e.prepared.edges,i.rect=e._rects.corrected,i.deltaRect=e._rects.delta}function Qs({iEvent:t,interaction:e}){if(e.prepared.name!=="resize"||!e.prepared.edges)return;const i=t,s=e.interactable.options.resize.invert,r=s==="reposition"||s==="negate",o=e.rect,{start:a,corrected:c,delta:l,previous:u}=e._rects;if(w(u,c),r){if(w(c,o),s==="reposition"){if(c.top>c.bottom){const d=c.top;c.top=c.bottom,c.bottom=d}if(c.left>c.right){const d=c.left;c.left=c.right,c.right=d}}}else c.top=Math.min(o.top,a.bottom),c.bottom=Math.max(o.bottom,a.top),c.left=Math.min(o.left,a.right),c.right=Math.max(o.right,a.left);c.width=c.right-c.left,c.height=c.bottom-c.top;for(const d in c)l[d]=c[d]-u[d];i.edges=e.prepared.edges,i.rect=c,i.deltaRect=l}function tr({iEvent:t,interaction:e}){if(e.prepared.name!=="resize"||!e.prepared.edges)return;const i=t;i.edges=e.prepared.edges,i.rect=e._rects.corrected,i.deltaRect=e._rects.delta}function _i({iEvent:t,interaction:e}){if(e.prepared.name!=="resize"||!e.resizeAxes)return;const i=e.interactable.options,n=t;i.resize.square?(e.resizeAxes==="y"?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=e.resizeAxes,e.resizeAxes==="x"?n.delta.y=0:e.resizeAxes==="y"&&(n.delta.x=0))}const Z={id:"actions/resize",before:["actions/drag"],install:Gs,listeners:{"interactions:new":({interaction:t})=>{t.resizeAxes="xy"},"interactions:action-start":t=>{Zs(t),_i(t)},"interactions:action-move":t=>{Qs(t),_i(t)},"interactions:action-end":tr,"auto-start:check":Us},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor({edges:t,axis:e,name:i}){const n=Z.cursors;let s=null;if(e)s=n[i+e];else if(t){let r="";for(const o of["top","bottom","left","right"])t[o]&&(r+=o);s=n[r]}return s},defaultMargin:null},er=Z;J.use(er);const ir=Object.freeze(Object.defineProperty({__proto__:null,edgeTarget:()=>{},elements:()=>{},grid:t=>{const e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(([n,s])=>n in t||s in t),i=(n,s)=>{const{range:r,limits:o={left:-1/0,right:1/0,top:-1/0,bottom:1/0},offset:a={x:0,y:0}}=t,c={range:r,grid:t,x:null,y:null};for(const[l,u]of e){const d=Math.round((n-a.x)/t[l]),g=Math.round((s-a.y)/t[u]);c[l]=Math.max(o.left,Math.min(o.right,d*t[l]+a.x)),c[u]=Math.max(o.top,Math.min(o.bottom,g*t[u]+a.y))}return c};return i.grid=t,i.coordFields=e,i}},Symbol.toStringTag,{value:"Module"})),nr={id:"snappers",install(t){const{interactStatic:e}=t;e.snappers=w(e.snappers||{},ir),e.createSnapGrid=e.snappers.grid}};class Pi{constructor(e){f(this,"states",[]);f(this,"startOffset",{left:0,right:0,top:0,bottom:0});f(this,"startDelta");f(this,"result");f(this,"endResult");f(this,"edges");f(this,"interaction");this.interaction=e,this.result=Gt()}start({phase:e},i){const{interaction:n}=this,s=sr(n);this.prepareStates(s),this.edges=w({},n.edges),this.startOffset=rr(n.rect,i),this.startDelta={x:0,y:0};const r=this.fillArg({phase:e,pageCoords:i,preEnd:!1});return this.result=Gt(),this.startAll(r),this.result=this.setAll(r)}fillArg(e){const{interaction:i}=this;return e.interaction=i,e.interactable=i.interactable,e.element=i.element,e.rect=e.rect||i.rect,e.edges=this.edges,e.startOffset=this.startOffset,e}startAll(e){for(const i of this.states)i.methods.start&&(e.state=i,i.methods.start(e))}setAll(e){const{phase:i,preEnd:n,skipModifiers:s,rect:r}=e;e.coords=w({},e.pageCoords),e.rect=w({},r);const o=s?this.states.slice(s):this.states,a=Gt(e.coords,e.rect);for(const d of o){var c;const{options:g}=d,y=w({},e.coords);let b=null;(c=d.methods)!=null&&c.set&&this.shouldDo(g,n,i)&&(e.state=d,b=d.methods.set(e),he(this.interaction.edges,e.rect,{x:e.coords.x-y.x,y:e.coords.y-y.y})),a.eventProps.push(b)}a.delta.x=e.coords.x-e.pageCoords.x,a.delta.y=e.coords.y-e.pageCoords.y,a.rectDelta.left=e.rect.left-r.left,a.rectDelta.right=e.rect.right-r.right,a.rectDelta.top=e.rect.top-r.top,a.rectDelta.bottom=e.rect.bottom-r.bottom;const l=this.result.coords,u=this.result.rect;if(l&&u){const d=a.rect.left!==u.left||a.rect.right!==u.right||a.rect.top!==u.top||a.rect.bottom!==u.bottom;a.changed=d||l.x!==a.coords.x||l.y!==a.coords.y}return a}applyToInteraction(e){const{interaction:i}=this,{phase:n}=e,s=i.coords.cur,r=i.coords.start,{result:o,startDelta:a}=this,c=o.delta;n==="start"&&w(this.startDelta,o.delta);for(const[d,g]of[[r,a],[s,c]])d.page.x+=g.x,d.page.y+=g.y,d.client.x+=g.x,d.client.y+=g.y;const{rectDelta:l}=this.result,u=e.rect||i.rect;u.left+=l.left,u.right+=l.right,u.top+=l.top,u.bottom+=l.bottom,u.width=u.right-u.left,u.height=u.bottom-u.top}setAndApply(e){const{interaction:i}=this,{phase:n,preEnd:s,skipModifiers:r}=e,o=this.setAll(this.fillArg({preEnd:s,phase:n,pageCoords:e.modifiedCoords||i.coords.cur.page}));if(this.result=o,!o.changed&&(!r||r<this.states.length)&&i.interacting())return!1;if(e.modifiedCoords){const{page:a}=i.coords.cur,c={x:e.modifiedCoords.x-a.x,y:e.modifiedCoords.y-a.y};o.coords.x+=c.x,o.coords.y+=c.y,o.delta.x+=c.x,o.delta.y+=c.y}this.applyToInteraction(e)}beforeEnd(e){const{interaction:i,event:n}=e,s=this.states;if(!s||!s.length)return;let r=!1;for(const o of s){e.state=o;const{options:a,methods:c}=o,l=c.beforeEnd&&c.beforeEnd(e);if(l)return this.endResult=l,!1;r=r||!r&&this.shouldDo(a,!0,e.phase,!0)}r&&i.move({event:n,preEnd:!0})}stop(e){const{interaction:i}=e;if(!this.states||!this.states.length)return;const n=w({states:this.states,interactable:i.interactable,element:i.element,rect:null},e);this.fillArg(n);for(const s of this.states)n.state=s,s.methods.stop&&s.methods.stop(n);this.states=null,this.endResult=null}prepareStates(e){this.states=[];for(let i=0;i<e.length;i++){const{options:n,methods:s,name:r}=e[i];this.states.push({options:n,methods:s,index:i,name:r})}return this.states}restoreInteractionCoords({interaction:{coords:e,rect:i,modification:n}}){if(!n.result)return;const{startDelta:s}=n,{delta:r,rectDelta:o}=n.result,a=[[e.start,s],[e.cur,r]];for(const[c,l]of a)c.page.x-=l.x,c.page.y-=l.y,c.client.x-=l.x,c.client.y-=l.y;i.left-=o.left,i.right-=o.right,i.top-=o.top,i.bottom-=o.bottom}shouldDo(e,i,n,s){return!(!e||e.enabled===!1||s&&!e.endOnly||e.endOnly&&!i||n==="start"&&!e.setStart)}copyFrom(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map(i=>vt(i)),this.result=Gt(w({},e.result.coords),w({},e.result.rect))}destroy(){for(const e in this)this[e]=null}}function Gt(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function sr(t){const e=t.interactable.options[t.prepared.name],i=e.modifiers;return i&&i.length?i:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(n=>{const s=e[n];return s&&s.enabled&&{options:s,methods:s._methods}}).filter(n=>!!n)}function rr(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}function ot(t,e){const{defaults:i}=t,n={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},s=r=>{const o=r||{};o.enabled=o.enabled!==!1;for(const c in i)c in o||(o[c]=i[c]);const a={options:o,methods:n,name:e,enable:()=>(o.enabled=!0,a),disable:()=>(o.enabled=!1,a)};return a};return e&&typeof e=="string"&&(s._defaults=i,s._methods=n),s}function Ie({iEvent:t,interaction:e}){const i=e.modification.result;i&&(t.modifiers=i.eventProps)}const or={id:"modifiers/base",before:["actions"],install:t=>{t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":({interaction:t})=>{t.modification=new Pi(t)},"interactions:before-action-start":t=>{const e=t.interaction.modification;e.start(t,t.interaction.coords.start.page),t.interaction.edges=e.edges,e.applyToInteraction(t)},"interactions:before-action-move":t=>t.interaction.modification.setAndApply(t),"interactions:before-action-end":t=>t.interaction.modification.beforeEnd(t),"interactions:action-start":Ie,"interactions:action-move":Ie,"interactions:action-end":Ie,"interactions:after-action-start":t=>t.interaction.modification.restoreInteractionCoords(t),"interactions:after-action-move":t=>t.interaction.modification.restoreInteractionCoords(t),"interactions:stop":t=>t.interaction.modification.stop(t)}},ar={start(t){const{state:e,rect:i,edges:n,pageCoords:s}=t;let{ratio:r}=e.options;const{equalDelta:o,modifiers:a}=e.options;r==="preserve"&&(r=i.width/i.height),e.startCoords=w({},s),e.startRect=w({},i),e.ratio=r,e.equalDelta=o;const c=e.linkedEdges={top:n.top||n.left&&!n.bottom,left:n.left||n.top&&!n.right,bottom:n.bottom||n.right&&!n.top,right:n.right||n.bottom&&!n.left};if(e.xIsPrimaryAxis=!!(n.left||n.right),e.equalDelta){const u=(c.left?1:-1)*(c.top?1:-1);e.edgeSign={x:u,y:u}}else e.edgeSign={x:c.left?-1:1,y:c.top?-1:1};if(w(t.edges,c),!a||!a.length)return;const l=new Pi(t.interaction);l.copyFrom(t.interaction.modification),l.prepareStates(a),e.subModification=l,l.startAll({...t})},set(t){const{state:e,rect:i,coords:n}=t,s=w({},n),r=e.equalDelta?lr:cr;if(r(e,e.xIsPrimaryAxis,n,i),!e.subModification)return null;const o=w({},i);he(e.linkedEdges,o,{x:n.x-s.x,y:n.y-s.y});const a=e.subModification.setAll({...t,rect:o,edges:e.linkedEdges,pageCoords:n,prevCoords:n,prevRect:o}),{delta:c}=a;if(a.changed){const l=Math.abs(c.x)>Math.abs(c.y);r(e,l,a.coords,a.rect),w(n,a.coords)}return a.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function lr({startCoords:t,edgeSign:e},i,n){i?n.y=t.y+(n.x-t.x)*e.y:n.x=t.x+(n.y-t.y)*e.x}function cr({startRect:t,startCoords:e,ratio:i,edgeSign:n},s,r,o){if(s){const a=o.width/i;r.y=e.y+(a-t.height)*n.y}else{const a=o.height*i;r.x=e.x+(a-t.width)*n.x}}const ur=ot(ar,"aspectRatio"),ki=()=>{};ki._defaults={};const Ut=ki;function hr({rect:t,startOffset:e,state:i,interaction:n,pageCoords:s}){const{options:r}=i,{elementRect:o}=r,a=w({left:0,top:0,right:0,bottom:0},r.offset||{});if(t&&o){const c=dt(r.restriction,n,s);if(c){const l=c.right-c.left-t.width,u=c.bottom-c.top-t.height;l<0&&(a.left+=l,a.right+=l),u<0&&(a.top+=u,a.bottom+=u)}a.left+=e.left-t.width*o.left,a.top+=e.top-t.height*o.top,a.right+=e.right-t.width*(1-o.right),a.bottom+=e.bottom-t.height*(1-o.bottom)}i.offset=a}function dr({coords:t,interaction:e,state:i}){const{options:n,offset:s}=i,r=dt(n.restriction,e,t);if(!r)return;const o=Un(r);t.x=Math.max(Math.min(o.right-s.right,t.x),o.left+s.left),t.y=Math.max(Math.min(o.bottom-s.bottom,t.y),o.top+s.top)}function dt(t,e,i){return p.func(t)?_t(t,e.interactable,e.element,[i.x,i.y,e]):_t(t,e.interactable,e.element)}const Vt={start:hr,set:dr,defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},fr=ot(Vt,"restrict"),$i={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Oi={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function pr({interaction:t,startOffset:e,state:i}){const{options:n}=i;let s;if(n){const r=dt(n.offset,t,t.coords.start.page);s=jt(r)}s=s||{x:0,y:0},i.offset={top:s.y+e.top,left:s.x+e.left,bottom:s.y-e.bottom,right:s.x-e.right}}function gr({coords:t,edges:e,interaction:i,state:n}){const{offset:s,options:r}=n;if(!e)return;const o=w({},t),a=dt(r.inner,i,o)||{},c=dt(r.outer,i,o)||{};Hi(a,$i),Hi(c,Oi),e.top?t.y=Math.min(Math.max(c.top+s.top,o.y),a.top+s.top):e.bottom&&(t.y=Math.max(Math.min(c.bottom+s.bottom,o.y),a.bottom+s.bottom)),e.left?t.x=Math.min(Math.max(c.left+s.left,o.x),a.left+s.left):e.right&&(t.x=Math.max(Math.min(c.right+s.right,o.x),a.right+s.right))}function Hi(t,e){for(const i of["top","left","bottom","right"])i in t||(t[i]=e[i]);return t}const Ot={noInner:$i,noOuter:Oi,start:pr,set:gr,defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},mr=ot(Ot,"restrictEdges"),yr=w({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},Vt.defaults),br={start:Vt.start,set:Vt.set,defaults:yr},vr=ot(br,"restrictRect"),xr={width:-1/0,height:-1/0},wr={width:1/0,height:1/0};function Sr(t){return Ot.start(t)}function Er(t){const{interaction:e,state:i,rect:n,edges:s}=t,{options:r}=i;if(!s)return;const o=ci(dt(r.min,e,t.coords))||xr,a=ci(dt(r.max,e,t.coords))||wr;i.options={endOnly:r.endOnly,inner:w({},Ot.noInner),outer:w({},Ot.noOuter)},s.top?(i.options.inner.top=n.bottom-o.height,i.options.outer.top=n.bottom-a.height):s.bottom&&(i.options.inner.bottom=n.top+o.height,i.options.outer.bottom=n.top+a.height),s.left?(i.options.inner.left=n.right-o.width,i.options.outer.left=n.right-a.width):s.right&&(i.options.inner.right=n.left+o.width,i.options.outer.right=n.left+a.width),Ot.set(t),i.options=r}const zr=ot({start:Sr,set:Er,defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize");function Ir(t){const{interaction:e,interactable:i,element:n,rect:s,state:r,startOffset:o}=t,{options:a}=r,c=a.offsetWithOrigin?Mr(t):{x:0,y:0};let l;if(a.offset==="startCoords")l={x:e.coords.start.page.x,y:e.coords.start.page.y};else{const d=_t(a.offset,i,n,[e]);l=jt(d)||{x:0,y:0},l.x+=c.x,l.y+=c.y}const{relativePoints:u}=a;r.offsets=s&&u&&u.length?u.map((d,g)=>({index:g,relativePoint:d,x:o.left-s.width*d.x+l.x,y:o.top-s.height*d.y+l.y})):[{index:0,relativePoint:null,x:l.x,y:l.y}]}function Tr(t){const{interaction:e,coords:i,state:n}=t,{options:s,offsets:r}=n,o=de(e.interactable,e.element,e.prepared.name),a=w({},i),c=[];s.offsetWithOrigin||(a.x-=o.x,a.y-=o.y);for(const u of r){const d=a.x-u.x,g=a.y-u.y;for(let y=0,b=s.targets.length;y<b;y++){const z=s.targets[y];let T;p.func(z)?T=z(d,g,e._proxy,u,y):T=z,T&&c.push({x:(p.number(T.x)?T.x:d)+u.x,y:(p.number(T.y)?T.y:g)+u.y,range:p.number(T.range)?T.range:s.range,source:z,index:y,offset:u})}}const l={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}};for(const u of c){const d=u.range,g=u.x-a.x,y=u.y-a.y,b=Nt(g,y);let z=b<=d;d===1/0&&l.inRange&&l.range!==1/0&&(z=!1),(!l.target||(z?l.inRange&&d!==1/0?b/d<l.distance/l.range:d===1/0&&l.range!==1/0||b<l.distance:!l.inRange&&b<l.distance))&&(l.target=u,l.distance=b,l.range=d,l.inRange=z,l.delta.x=g,l.delta.y=y)}return l.inRange&&(i.x=l.target.x,i.y=l.target.y),n.closest=l,l}function Mr(t){const{element:e}=t.interaction;return jt(_t(t.state.options.origin,null,null,[e]))||de(t.interactable,e,t.interaction.prepared.name)}const Te={start:Ir,set:Tr,defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Dr=ot(Te,"snap");function Cr(t){const{state:e,edges:i}=t,{options:n}=e;if(!i)return null;t.state={options:{targets:null,relativePoints:[{x:i.left?0:1,y:i.top?0:1}],offset:n.offset||"self",origin:{x:0,y:0},range:n.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],Te.start(t),e.offsets=t.state.offsets,t.state=e}function Rr(t){const{interaction:e,state:i,coords:n}=t,{options:s,offsets:r}=i,o={x:n.x-r[0].x,y:n.y-r[0].y};i.options=w({},s),i.options.targets=[];for(const c of s.targets||[]){let l;if(p.func(c)?l=c(o.x,o.y,e):l=c,!!l){for(const[u,d]of i.targetFields)if(u in l||d in l){l.x=l[u],l.y=l[d];break}i.options.targets.push(l)}}const a=Te.set(t);return i.options=s,a}const Kt={start:Cr,set:Rr,defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},_r=ot(Kt,"snapSize");function Pr(t){const{edges:e}=t;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],Kt.start(t)):null}const kr={start:Pr,set:Kt.set,defaults:w(vt(Kt.defaults),{targets:null,range:null,offset:{x:0,y:0}})},$r=ot(kr,"snapEdges"),Me={aspectRatio:ur,restrictEdges:mr,restrict:fr,restrictRect:vr,restrictSize:zr,snapEdges:$r,snap:Dr,snapSize:_r,spring:Ut,avoid:Ut,transform:Ut,rubberband:Ut},Or={id:"modifiers",install(t){const{interactStatic:e}=t;t.usePlugin(or),t.usePlugin(nr),e.modifiers=Me;for(const i in Me){const{_defaults:n,_methods:s}=Me[i];n._methods=s,t.defaults.perAction[i]=n}}};J.use(Or);const Hr={};var St;(function(t){t.touchAction="touchAction",t.boxSizing="boxSizing",t.noListeners="noListeners"})(St||(St={}));const Ai="[interact.js] ",De={touchAction:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action",boxSizing:"https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing"},Ar=!1;function Br(t,{logger:e}={}){const{Interactable:i,defaults:n}=t;t.logger=e||console,n.base.devTools={ignore:{}},i.prototype.devTools=function(s){return s?(w(this.options.devTools,s),this):this.options.devTools},t.usePlugin(Hr)}const Bi=[{name:St.touchAction,perform({element:t}){return!Lr(t,"touchAction",/pan-|pinch|none/)},getInfo({element:t}){return[t,De.touchAction]},text:`Consider adding CSS "touch-action: none" to this element
`},{name:St.boxSizing,perform(t){const{element:e}=t;return t.prepared.name==="resize"&&e instanceof j.HTMLElement&&!Li(e,"boxSizing",/border-box/)},text:'Consider adding CSS "box-sizing: border-box" to this resizable element',getInfo({element:t}){return[t,De.boxSizing]}},{name:St.noListeners,perform(t){const e=t.prepared.name;return!(t.interactable.events.types[`${e}move`]||[]).length},getInfo(t){return[t.prepared.name,t.interactable]},text:"There are no listeners set for this action"}];function Li(t,e,i){const n=t.style[e]||st.getComputedStyle(t)[e];return i.test((n||"").toString())}function Lr(t,e,i){let n=t;for(;p.element(n);){if(Li(n,e,i))return!0;n=rt(n)}return!1}const Wi="dev-tools",Wr=Ar?{id:Wi,install:()=>{}}:{id:Wi,install:Br,listeners:{"interactions:action-start":({interaction:t},e)=>{for(const i of Bi){const n=t.interactable&&t.interactable.options;!(n&&n.devTools&&n.devTools.ignore[i.name])&&i.perform(t)&&e.logger.warn(Ai+i.text,...i.getInfo(t))}}},checks:Bi,CheckName:St,links:De,prefix:Ai};J.use(Wr);const Co="",ji=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},jr={name:"GridItem",props:{isDraggable:{type:Boolean,required:!1,default:null},isResizable:{type:Boolean,required:!1,default:null},isBounded:{type:Boolean,required:!1,default:null},static:{type:Boolean,required:!1,default:!1},minH:{type:Number,required:!1,default:1},minW:{type:Number,required:!1,default:1},maxH:{type:Number,required:!1,default:1/0},maxW:{type:Number,required:!1,default:1/0},x:{type:Number,required:!0},y:{type:Number,required:!0},w:{type:Number,required:!0},h:{type:Number,required:!0},id:{required:!0},dragIgnoreFrom:{type:String,required:!1,default:"a, button"},dragAllowFrom:{type:String,required:!1,default:null},resizeIgnoreFrom:{type:String,required:!1,default:"a, button"},preserveAspectRatio:{type:Boolean,required:!1,default:!1},dragOption:{type:Object,required:!1,default:()=>({})},resizeOption:{type:Object,required:!1,default:()=>({})}},inject:["eventBus","layoutInstance"],data(){return{cols:1,containerWidth:100,rowHeight:30,margin:[10,10],maxRows:1/0,draggable:null,resizable:null,transformScale:1,useCssTransforms:!0,useStyleCursor:!0,isDragging:!1,dragging:null,isResizing:!1,resizing:null,lastX:NaN,lastY:NaN,lastW:NaN,lastH:NaN,style:{},rtl:!1,dragEventSet:!1,resizeEventSet:!1,previousW:null,previousH:null,previousX:null,previousY:null,innerX:this.x,innerY:this.y,innerW:this.w,innerH:this.h}},created(){this.updateWidthHandler=t=>{this.updateWidth(t)},this.compactHandler=t=>{this.compact(t)},this.setDraggableHandler=t=>{this.isDraggable===null&&(this.draggable=t)},this.setResizableHandler=t=>{this.isResizable===null&&(this.resizable=t)},this.setBoundedHandler=t=>{this.isBounded===null&&(this.bounded=t)},this.setTransformScaleHandler=t=>{this.transformScale=t},this.setRowHeightHandler=t=>{this.rowHeight=t},this.setMaxRowsHandler=t=>{this.maxRows=t},this.directionchangeHandler=()=>{this.rtl=Ue()==="rtl",this.compact()},this.setColNum=t=>{this.cols=parseInt(t)},this.eventBus.$on("updateWidth",this.updateWidthHandler),this.eventBus.$on("compact",this.compactHandler),this.eventBus.$on("setDraggable",this.setDraggableHandler),this.eventBus.$on("setResizable",this.setResizableHandler),this.eventBus.$on("setBounded",this.setBoundedHandler),this.eventBus.$on("setTransformScale",this.setTransformScaleHandler),this.eventBus.$on("setRowHeight",this.setRowHeightHandler),this.eventBus.$on("setMaxRows",this.setMaxRowsHandler),this.eventBus.$on("directionchange",this.directionchangeHandler),this.eventBus.$on("setColNum",this.setColNum),this.rtl=Ue()==="rtl"},beforeUnmount(){this.eventBus.$off("updateWidth",this.updateWidthHandler),this.eventBus.$off("compact",this.compactHandler),this.eventBus.$off("setDraggable",this.setDraggableHandler),this.eventBus.$off("setResizable",this.setResizableHandler),this.eventBus.$off("setBounded",this.setBoundedHandler),this.eventBus.$off("setTransformScale",this.setTransformScaleHandler),this.eventBus.$off("setRowHeight",this.setRowHeightHandler),this.eventBus.$off("setMaxRows",this.setMaxRowsHandler),this.eventBus.$off("directionchange",this.directionchangeHandler),this.eventBus.$off("setColNum",this.setColNum),this.interactObj&&this.interactObj.unset()},mounted(){this.layoutInstance.responsive&&this.layoutInstance.lastBreakpoint?this.cols=oe(this.layoutInstance.lastBreakpoint,this.layoutInstance.cols):this.cols=this.layoutInstance.colNum,this.rowHeight=this.layoutInstance.rowHeight,this.containerWidth=this.layoutInstance.width!==null?this.layoutInstance.width:100,this.margin=this.layoutInstance.margin!==void 0?this.layoutInstance.margin:[10,10],this.maxRows=this.layoutInstance.maxRows,this.isDraggable===null?this.draggable=this.layoutInstance.isDraggable:this.draggable=this.isDraggable,this.isResizable===null?this.resizable=this.layoutInstance.isResizable:this.resizable=this.isResizable,this.isBounded===null?this.bounded=this.layoutInstance.isBounded:this.bounded=this.isBounded,this.transformScale=this.layoutInstance.transformScale,this.useCssTransforms=this.layoutInstance.useCssTransforms,this.useStyleCursor=this.layoutInstance.useStyleCursor,this.createStyle()},watch:{isDraggable(){this.draggable=this.isDraggable},static(){this.tryMakeDraggable(),this.tryMakeResizable()},draggable(){this.tryMakeDraggable()},isResizable(){this.resizable=this.isResizable},isBounded(){this.bounded=this.isBounded},resizable(){this.tryMakeResizable()},rowHeight(){this.createStyle(),this.emitContainerResized()},cols(){this.tryMakeResizable(),this.createStyle(),this.emitContainerResized()},containerWidth(){this.tryMakeResizable(),this.createStyle(),this.emitContainerResized()},x(t){this.innerX=t,this.createStyle()},y(t){this.innerY=t,this.createStyle()},h(t){this.innerH=t,this.createStyle()},w(t){this.innerW=t,this.createStyle()},renderRtl(){this.tryMakeResizable(),this.createStyle()},minH(){this.tryMakeResizable()},maxH(){this.tryMakeResizable()},minW(){this.tryMakeResizable()},maxW(){this.tryMakeResizable()},"$parent.margin"(t){!t||t[0]==this.margin[0]&&t[1]==this.margin[1]||(this.margin=t.map(e=>Number(e)),this.createStyle(),this.emitContainerResized())}},computed:{classObj(){return{"vue-resizable":this.resizableAndNotStatic,static:this.static,resizing:this.isResizing,"vue-draggable-dragging":this.isDragging,cssTransforms:this.useCssTransforms,"render-rtl":this.renderRtl,"disable-userselect":this.isDragging,"no-touch":this.isAndroid&&this.draggableOrResizableAndNotStatic}},resizableAndNotStatic(){return this.resizable&&!this.static},draggableOrResizableAndNotStatic(){return(this.draggable||this.resizable)&&!this.static},isAndroid(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1},renderRtl(){return this.layoutInstance.isMirrored?!this.rtl:this.rtl},resizableHandleClass(){return this.renderRtl?"vue-resizable-handle vue-rtl-resizable-handle":"vue-resizable-handle"}},methods:{createStyle(){this.x+this.w>this.cols?(this.innerX=0,this.innerW=this.w>this.cols?this.cols:this.w):(this.innerX=this.x,this.innerW=this.w);let t=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH);this.isDragging&&(t.top=this.dragging.top,this.renderRtl?t.right=this.dragging.left:t.left=this.dragging.left),this.isResizing&&(t.width=this.resizing.width,t.height=this.resizing.height);let e;this.useCssTransforms?this.renderRtl?e=Cn(t.top,t.right,t.width,t.height):e=Dn(t.top,t.left,t.width,t.height):this.renderRtl?e=_n(t.top,t.right,t.width,t.height):e=Rn(t.top,t.left,t.width,t.height),this.style=e},emitContainerResized(){let t={};for(let e of["width","height"]){let n=this.style[e].match(/^(\d+)px$/);if(!n)return;t[e]=n[1]}this.$emit("container-resized",this.id,this.h,this.w,t.height,t.width)},handleResize(t){if(this.static)return;const e=Ye(t);if(e==null)return;const{x:i,y:n}=e,s={width:0,height:0};let r;switch(t.type){case"resizestart":{this.tryMakeResizable(),this.previousW=this.innerW,this.previousH=this.innerH,r=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH),s.width=r.width,s.height=r.height,this.resizing=s,this.isResizing=!0;break}case"resizemove":{const o=qe(this.lastW,this.lastH,i,n);this.renderRtl?s.width=this.resizing.width-o.deltaX/this.transformScale:s.width=this.resizing.width+o.deltaX/this.transformScale,s.height=this.resizing.height+o.deltaY/this.transformScale,this.resizing=s;break}case"resizeend":{r=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH),s.width=r.width,s.height=r.height,this.resizing=null,this.isResizing=!1;break}}r=this.calcWH(s.height,s.width),r.w<this.minW&&(r.w=this.minW),r.w>this.maxW&&(r.w=this.maxW),r.h<this.minH&&(r.h=this.minH),r.h>this.maxH&&(r.h=this.maxH),r.h<1&&(r.h=1),r.w<1&&(r.w=1),this.lastW=i,this.lastH=n,(this.innerW!==r.w||this.innerH!==r.h)&&this.$emit("resize",this.id,r.h,r.w,s.height,s.width),t.type==="resizeend"&&(this.previousW!==this.innerW||this.previousH!==this.innerH)&&this.$emit("resized",this.id,r.h,r.w,s.height,s.width),this.eventBus.$emit("resizeEvent",t.type,this.id,this.innerX,this.innerY,r.h,r.w)},handleDrag(t){if(this.static||this.isResizing)return;const e=Ye(t);if(e===null)return;const{x:i,y:n}=e;let s={top:0,left:0};switch(t.type){case"dragstart":{this.previousX=this.innerX,this.previousY=this.innerY;let o=t.target.offsetParent.getBoundingClientRect(),a=t.target.getBoundingClientRect();const c=a.left/this.transformScale,l=o.left/this.transformScale,u=a.right/this.transformScale,d=o.right/this.transformScale,g=a.top/this.transformScale,y=o.top/this.transformScale;this.renderRtl?s.left=(u-d)*-1:s.left=c-l,s.top=g-y,this.dragging=s,this.isDragging=!0;break}case"dragend":{if(!this.isDragging)return;let o=t.target.offsetParent.getBoundingClientRect(),a=t.target.getBoundingClientRect();const c=a.left/this.transformScale,l=o.left/this.transformScale,u=a.right/this.transformScale,d=o.right/this.transformScale,g=a.top/this.transformScale,y=o.top/this.transformScale;this.renderRtl?s.left=(u-d)*-1:s.left=c-l,s.top=g-y,this.dragging=null,this.isDragging=!1;break}case"dragmove":{const o=qe(this.lastX,this.lastY,i,n);if(this.renderRtl?s.left=this.dragging.left-o.deltaX/this.transformScale:s.left=this.dragging.left+o.deltaX/this.transformScale,s.top=this.dragging.top+o.deltaY/this.transformScale,this.bounded){const a=t.target.offsetParent.clientHeight-this.calcGridItemWHPx(this.h,this.rowHeight,this.margin[1]);s.top=this.clamp(s.top,0,a);const c=this.calcColWidth(),l=this.containerWidth-this.calcGridItemWHPx(this.w,c,this.margin[0]);s.left=this.clamp(s.left,0,l)}this.dragging=s;break}}let r;this.renderRtl?r=this.calcXY(s.top,s.left):r=this.calcXY(s.top,s.left),this.lastX=i,this.lastY=n,(this.innerX!==r.x||this.innerY!==r.y)&&this.$emit("move",this.id,r.x,r.y),t.type==="dragend"&&(this.previousX!==this.innerX||this.previousY!==this.innerY)&&this.$emit("moved",this.id,r.x,r.y),this.eventBus.$emit("dragEvent",t.type,this.id,r.x,r.y,this.innerH,this.innerW)},calcPosition(t,e,i,n){const s=this.calcColWidth();let r;return this.renderRtl?r={right:Math.round(s*t+(t+1)*this.margin[0]),top:Math.round(this.rowHeight*e+(e+1)*this.margin[1]),width:i===1/0?i:Math.round(s*i+Math.max(0,i-1)*this.margin[0]),height:n===1/0?n:Math.round(this.rowHeight*n+Math.max(0,n-1)*this.margin[1])}:r={left:Math.round(s*t+(t+1)*this.margin[0]),top:Math.round(this.rowHeight*e+(e+1)*this.margin[1]),width:i===1/0?i:Math.round(s*i+Math.max(0,i-1)*this.margin[0]),height:n===1/0?n:Math.round(this.rowHeight*n+Math.max(0,n-1)*this.margin[1])},r},calcXY(t,e){const i=this.calcColWidth();let n=Math.round((e-this.margin[0])/(i+this.margin[0])),s=Math.round((t-this.margin[1])/(this.rowHeight+this.margin[1]));return n=Math.max(Math.min(n,this.cols-this.innerW),0),s=Math.max(Math.min(s,this.maxRows-this.innerH),0),{x:n,y:s}},calcColWidth(){return(this.containerWidth-this.margin[0]*(this.cols+1))/this.cols},calcGridItemWHPx(t,e,i){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*i):t},clamp(t,e,i){return Math.max(Math.min(t,i),e)},calcWH(t,e,i=!1){const n=this.calcColWidth();let s=Math.round((e+this.margin[0])/(n+this.margin[0])),r=0;return i?r=Math.ceil((t+this.margin[1])/(this.rowHeight+this.margin[1])):r=Math.round((t+this.margin[1])/(this.rowHeight+this.margin[1])),s=Math.max(Math.min(s,this.cols-this.innerX),0),r=Math.max(Math.min(r,this.maxRows-this.innerY),0),{w:s,h:r}},updateWidth(t,e){this.containerWidth=t,e!=null&&(this.cols=e)},compact(){this.createStyle()},tryMakeDraggable(){if((this.interactObj===null||this.interactObj===void 0)&&(this.interactObj=J(this.$refs.item),this.useStyleCursor||this.interactObj.styleCursor(!1)),this.draggable&&!this.static){const t={ignoreFrom:this.dragIgnoreFrom,allowFrom:this.dragAllowFrom,...this.dragOption};this.interactObj.draggable(t),this.dragEventSet||(this.dragEventSet=!0,this.interactObj.on("dragstart dragmove dragend",e=>{this.handleDrag(e)}))}else this.interactObj.draggable({enabled:!1})},tryMakeResizable(){if((this.interactObj===null||this.interactObj===void 0)&&(this.interactObj=J(this.$refs.item),this.useStyleCursor||this.interactObj.styleCursor(!1)),this.resizable&&!this.static){let t=this.calcPosition(0,0,this.maxW,this.maxH),e=this.calcPosition(0,0,this.minW,this.minH);const i={edges:{left:!1,right:"."+this.resizableHandleClass.trim().replace(" ","."),bottom:"."+this.resizableHandleClass.trim().replace(" ","."),top:!1},ignoreFrom:this.resizeIgnoreFrom,restrictSize:{min:{height:e.height*this.transformScale,width:e.width*this.transformScale},max:{height:t.height*this.transformScale,width:t.width*this.transformScale}},...this.resizeOption};this.preserveAspectRatio&&(i.modifiers=[J.modifiers.aspectRatio({ratio:"preserve"})]),this.interactObj.resizable(i),this.resizeEventSet||(this.resizeEventSet=!0,this.interactObj.on("resizestart resizemove resizeend",n=>{this.handleResize(n)}))}else this.interactObj.resizable({enabled:!1})},autoSize(){this.previousW=this.innerW,this.previousH=this.innerH;let t=this.$slots.default()[0].elm.getBoundingClientRect(),e=this.calcWH(t.height,t.width,!0);e.w<this.minW&&(e.w=this.minW),e.w>this.maxW&&(e.w=this.maxW),e.h<this.minH&&(e.h=this.minH),e.h>this.maxH&&(e.h=this.maxH),e.h<1&&(e.h=1),e.w<1&&(e.w=1),(this.innerW!==e.w||this.innerH!==e.h)&&this.$emit("resize",this.id,e.h,e.w,t.height,t.width),(this.previousW!==e.w||this.previousH!==e.h)&&(this.$emit("resized",this.id,e.h,e.w,t.height,t.width),this.eventBus.$emit("resizeEvent","resizeend",this.id,this.innerX,this.innerY,e.h,e.w))}}};function Nr(t,e,i,n,s,r){return C.openBlock(),C.createElementBlock("div",{ref:"item",class:C.normalizeClass(["vue-grid-item",r.classObj]),style:C.normalizeStyle(s.style)},[C.renderSlot(t.$slots,"default"),r.resizableAndNotStatic?C.renderSlot(t.$slots,"resize-handle",{key:0,ref:"handle"},()=>[C.createElementVNode("span",{class:C.normalizeClass(r.resizableHandleClass)},null,2)]):C.createCommentVNode("",!0),s.draggable?C.renderSlot(t.$slots,"drage-handle",{key:1,ref:"dragHandle"}):C.createCommentVNode("",!0)],6)}const Ni=ji(jr,[["render",Nr]]),Ro="",Fr={name:"GridLayout",provide(){return{eventBus:this.getEventBus(),layoutInstance:this.getLayoutInstance()}},components:{GridItem:Ni},props:{autoSize:{type:Boolean,default:!0},colNum:{type:Number,default:12},rowHeight:{type:Number,default:150},maxRows:{type:Number,default:1/0},margin:{type:Array,default:()=>[10,10]},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},isMirrored:{type:Boolean,default:!1},isBounded:{type:Boolean,default:!1},useCssTransforms:{type:Boolean,default:!0},verticalCompact:{type:Boolean,default:!0},restoreOnDrag:{type:Boolean,default:!1},layout:{type:Array,required:!0},responsive:{type:Boolean,default:!0},responsiveLayouts:{type:Object,default:()=>({})},transformScale:{type:Number,default:1},breakpoints:{type:Object,default:()=>({lg:1200,md:996,sm:768,xs:480,xxs:0})},cols:{type:Object,default:()=>({lg:12,md:10,sm:6,xs:4,xxs:2})},preventCollision:{type:Boolean,default:!1},useStyleCursor:{type:Boolean,default:!0}},data(){return{width:null,mergedStyle:{},lastLayoutLength:0,isDragging:!1,placeholder:{x:0,y:0,w:0,h:0,id:-1},layouts:{},lastBreakpoint:null,originalLayout:null}},created(){this.resizeEventHandler=t=>{let e,i,n,s,r,o;[e,i,n,s,r,o]=t,this.resizeEvent(e,i,n,s,r,o)},this.dragEventHandler=t=>{let e,i,n,s,r,o;[e,i,n,s,r,o]=t,this.dragEvent(e,i,n,s,r,o)},this.eventBus=this.getEventBus(),this.eventBus.$on("resizeEvent",this.resizeEventHandler),this.eventBus.$on("dragEvent",this.dragEventHandler),this.$emit("layout-created",this.layout)},beforeUnmount(){this.eventBus.$off("resizeEvent",this.resizeEventHandler),this.eventBus.$off("dragEvent",this.dragEventHandler),Wn("resize",this.onWindowResize),this.erd&&this.erd.uninstall(this.$refs.item)},beforeMount(){this.$emit("layout-before-mount",this.layout)},mounted(){this.$emit("layout-mounted",this.layout),this.$nextTick(()=>{Pn(this.layout),this.originalLayout=this.layout,this.$nextTick(()=>{this.initResponsiveFeatures(),this.onWindowResize(),Ln("resize",this.onWindowResize),yt(this.layout,this.verticalCompact),this.$emit("layout-updated",this.layout),this.updateHeight(),this.$nextTick(()=>{this.erd=En({strategy:"scroll",callOnAdd:!1}),this.erd.listenTo(this.$refs.item,()=>{this.onWindowResize()})})})})},watch:{width(t,e){this.$nextTick(()=>{this.eventBus.$emit("updateWidth",this.width),e===null&&this.$nextTick(()=>{this.$emit("layout-ready",this.layout)}),this.updateHeight()})},layout(){this.layoutUpdate()},colNum(t){this.eventBus.$emit("setColNum",t)},rowHeight(){this.eventBus.$emit("setRowHeight",this.rowHeight)},isDraggable(){this.eventBus.$emit("setDraggable",this.isDraggable)},isResizable(){this.eventBus.$emit("setResizable",this.isResizable)},isBounded(){this.eventBus.$emit("setBounded",this.isBounded)},transformScale(){this.eventBus.$emit("setTransformScale",this.transformScale)},responsive(){this.responsive||(this.$emit("update:layout",this.originalLayout),this.eventBus.$emit("setColNum",this.colNum)),this.onWindowResize()},maxRows(){this.eventBus.$emit("setMaxRows",this.maxRows)},margin(){this.updateHeight()}},methods:{getEventBus(){return Ht},getLayoutInstance(){return this},layoutUpdate(){if(this.layout!==void 0&&this.originalLayout!==null){if(this.layout.length!==this.originalLayout.length){let t=this.findDifference(this.layout,this.originalLayout);t.length>0&&(this.layout.length>this.originalLayout.length?this.originalLayout=this.originalLayout.concat(t):this.originalLayout=this.originalLayout.filter(e=>!t.some(i=>e.id===i.id))),this.lastLayoutLength=this.layout.length,this.initResponsiveFeatures()}yt(this.layout,this.verticalCompact),this.eventBus.$emit("updateWidth",this.width),this.updateHeight(),this.$emit("layout-updated",this.layout)}},updateHeight(){this.mergedStyle={height:this.containerHeight()}},onWindowResize(){this.$refs!==null&&this.$refs.item!==null&&this.$refs.item!==void 0&&(this.width=this.$refs.item.offsetWidth),this.eventBus.$emit("resizeEvent")},containerHeight(){return this.autoSize?zn(this.layout)*(this.rowHeight+this.margin[1])+this.margin[1]+"px":void 0},dragEvent(t,e,i,n,s,r){let o=Le(this.layout,e);o==null&&(o={x:0,y:0}),t==="dragstart"&&!this.verticalCompact&&(this.positionsBeforeDrag=this.layout.reduce((a,{id:c,x:l,y:u})=>({...a,[c]:{x:l,y:u}}),{})),t==="dragmove"||t==="dragstart"?(this.placeholder.id=e,this.placeholder.x=o.x,this.placeholder.y=o.y,this.placeholder.w=r,this.placeholder.h=s,this.$nextTick(()=>{this.isDragging=!0}),this.eventBus.$emit("updateWidth",this.width)):this.$nextTick(()=>{this.isDragging=!1}),re(this.layout,o,i,n,!0,this.preventCollision),this.restoreOnDrag?(o.static=!0,yt(this.layout,this.verticalCompact,this.positionsBeforeDrag),o.static=!1):yt(this.layout,this.verticalCompact),this.eventBus.$emit("compact"),this.updateHeight(),t==="dragend"&&(delete this.positionsBeforeDrag,this.$emit("layout-updated",this.layout))},resizeEvent(t,e,i,n,s,r){let o=Le(this.layout,e);o==null&&(o={h:0,w:0});let a;if(this.preventCollision){const c=We(this.layout,{...o,w:r,h:s}).filter(l=>l.id!==o.id);if(a=c.length>0,a){let l=1/0,u=1/0;c.forEach(d=>{d.x>o.x&&(l=Math.min(l,d.x)),d.y>o.y&&(u=Math.min(u,d.y))}),Number.isFinite(l)&&(o.w=l-o.x),Number.isFinite(u)&&(o.h=u-o.y)}}a||(o.w=r,o.h=s),t==="resizestart"||t==="resizemove"?(this.placeholder.id=e,this.placeholder.x=i,this.placeholder.y=n,this.placeholder.w=o.w,this.placeholder.h=o.h,this.$nextTick(()=>{this.isDragging=!0}),this.eventBus.$emit("updateWidth",this.width)):this.$nextTick(()=>{this.isDragging=!1}),this.responsive&&this.responsiveGridLayout(),yt(this.layout,this.verticalCompact),this.eventBus.$emit("compact"),this.updateHeight(),t==="resizeend"&&this.$emit("layout-updated",this.layout)},responsiveGridLayout(){let t=kn(this.breakpoints,this.width),e=oe(t,this.cols);this.lastBreakpoint!=null&&!this.layouts[this.lastBreakpoint]&&(this.layouts[this.lastBreakpoint]=se(this.layout));let i=$n(this.originalLayout,this.layouts,this.breakpoints,t,this.lastBreakpoint,e,this.verticalCompact);this.layouts[t]=i,this.lastBreakpoint!==t&&this.$emit("breakpoint-changed",t,i),this.$emit("update:layout",i),this.lastBreakpoint=t,this.eventBus.$emit("setColNum",oe(t,this.cols))},initResponsiveFeatures(){this.layouts=Object.assign({},this.responsiveLayouts)},findDifference(t,e){let i=t.filter(s=>!e.some(r=>s.id===r.id)),n=e.filter(s=>!t.some(r=>s.id===r.id));return i.concat(n)}}};function Xr(t,e,i,n,s,r){const o=C.resolveComponent("grid-item");return C.openBlock(),C.createElementBlock("div",{ref:"item",class:"vue-grid-layout",style:C.normalizeStyle(s.mergedStyle)},[C.renderSlot(t.$slots,"default"),C.withDirectives(C.createVNode(o,{class:"vue-grid-placeholder",x:s.placeholder.x,y:s.placeholder.y,w:s.placeholder.w,h:s.placeholder.h,id:s.placeholder.id},null,8,["x","y","w","h","id"]),[[C.vShow,s.isDragging]])],4)}const Yr=ji(Fr,[["render",Xr]]);W.GridItem=Ni,W.GridLayout=Yr,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
